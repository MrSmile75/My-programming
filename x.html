<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Traders Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --background-light: #ecf0f1;
            --background-dark: #34495e;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-light);
        }

        .marketplace-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .item-card {
            transition: transform 0.3s ease;
        }

        .item-card:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .sell-form {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        #notificationContainer {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .notification {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .cart-item img {
            width: 50px;
            height: 50px;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Your Cart</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="cartItems"></div>
                    <div class="mt-3">
                        <strong>Total: <span id="cartTotal">$0.00</span></strong>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="checkoutCart()">Checkout</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Landing Page -->
    <div class="container text-center my-5" id="landingPage">
        <h1 class="display-4 mb-4">Global Traders Marketplace</h1>
        <div class="d-flex justify-content-center gap-3">
            <button class="btn btn-success btn-lg" onclick="showSellPage()">
                <i class="bi bi-tag me-2"></i>Sell Items
            </button>
            <button class="btn btn-primary btn-lg" onclick="showBuyPage()">
                <i class="bi bi-cart me-2"></i>Buy Items
            </button>
        </div>
    </div>

    <!-- Sell Page -->
    <div id="sellPage" style="display:none;" class="marketplace-container">
        <div class="row">
            <div class="col-md-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Seller Guidelines</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li>✅ Provide clear, accurate item descriptions</li>
                            <li>✅ Use high-quality images</li>
                            <li>✅ Set competitive pricing</li>
                            <li>✅ Be honest about item condition</li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Categories</h3>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary" onclick="selectCategory('Electronics')">
                                <i class="bi bi-laptop me-2"></i>Electronics
                            </button>
                            <button class="btn btn-outline-primary" onclick="selectCategory('Fashion')">
                                <i class="bi bi-bag me-2"></i>Fashion
                            </button>
                            <button class="btn btn-outline-primary" onclick="selectCategory('Home')">
                                <i class="bi bi-house me-2"></i>Home & Garden
                            </button>
                            <button class="btn btn-outline-primary" onclick="selectCategory('Sports')">
                                <i class="bi bi-bicycle me-2"></i>Sports
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="sell-form">
                    <h2 class="mb-4">List Your Item</h2>
                    <form id="sellForm">
                        <div class="mb-3">
                            <label class="form-label">Item Name</label>
                            <input type="text" class="form-control" name="itemName" required>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">Price</label>
                                <div class="input-group">
                                    <select class="form-select" name="currency" style="max-width: 100px;">
                                        <option value="USD">USD</option>
                                        <option value="EUR">EUR</option>
                                        <option value="GBP">GBP</option>
                                    </select>
                                    <input type="number" class="form-control" name="itemPrice" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Condition</label>
                                <select class="form-select" name="itemCondition">
                                    <option>New</option>
                                    <option>Like New</option>
                                    <option>Good</option>
                                    <option>Fair</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" name="itemDescription" rows="4" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Item Image</label>
                            <input type="file" class="form-control" name="itemImage" accept="image/*" required>
                        </div>

                        <button type="submit" class="btn btn-success w-100">
                            <i class="bi bi-upload me-2"></i>List Item
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Buy Page -->
    <div id="buyPage" style="display:none;" class="marketplace-container">
        <div class="row">
            <div class="col-md-3">
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Filter Items</h3>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary" onclick="filterItems('Electronics')">
                                <i class="bi bi-laptop me-2"></i>Electronics
                            </button>
                            <button class="btn btn-outline-primary" onclick="filterItems('Fashion')">
                                <i class="bi bi-bag me-2"></i>Fashion
                            </button>
                            <button class="btn btn-outline-primary" onclick="filterItems('Home')">
                                <i class="bi bi-house me-2"></i>Home & Garden
                            </button>
                            <button class="btn btn-outline-primary" onclick="filterItems('Sports')">
                                <i class="bi bi-bicycle me-2"></i>Sports
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Price Range</h3>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Min Price</label>
                            <input type="number" class="form-control" id="minPriceFilter">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Max Price</label>
                            <input type="number" class="form-control" id="maxPriceFilter">
                        </div>
                        <button class="btn btn-primary w-100" onclick="applyPriceFilter()">
                            Apply Filter
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-md-9">
                <div class="d-flex justify-content-between mb-3">
                    <div class="input-group" style="width: 70%;">
                        <input type="text" class="form-control" id="searchInput" placeholder="Search items...">
                        <button class="btn btn-primary" onclick="searchItems()">
                            <i class="bi bi-search me-2"></i>Search
                        </button>
                    </div>
                    <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#cartModal">
                        <i class="bi bi-cart me-2"></i>Cart (<span id="cartItemCount">0</span>)
                    </button>
                </div>

                <div id="itemsContainer" class="row g-4">
                    <!-- Dynamically populated items -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Cart Management Class
        class CartManager {
            constructor() {
                this.cart = [];
                this.loadCartFromLocalStorage();
            }

            addToCart(item) {
                const existingItem = this.cart.find(cartItem => cartItem.id === item.id);
                
                if (existingItem) {
                    existingItem.quantity = (existingItem.quantity || 1) + 1;
                } else {
                    this.cart.push({
                        ...item,
                        quantity: 1
                    });
                }

                this.saveCartToLocalStorage();
                this.updateCartUI();
                this.showNotification(`${item.itemName} added to cart!`);
            }

            removeFromCart(itemId) {
                this.cart = this.cart.filter(item => item.id !== itemId);
                this.saveCartToLocalStorage();
                this.updateCartUI();
            }

            updateQuantity(itemId, quantity) {
                const item = this.cart.find(item => item.id === itemId);
                if (item) {
                    item.quantity = quantity > 0 ? quantity : 1;
                    this.saveCartToLocalStorage();
                    this.updateCartUI();
                }
            }

            calculateTotal() {
                return this.cart.reduce((total, item) => 
                    total + (parseFloat(item.itemPrice) * item.quantity), 0
                ).toFixed(2);
            }

            saveCartToLocalStorage() {
                localStorage.setItem('marketplaceCart', JSON.stringify(this.cart));
            }

            loadCartFromLocalStorage() {
                const savedCart = localStorage.getItem('marketplaceCart');
                this.cart = savedCart ? JSON.parse(savedCart) : [];
                this.updateCartUI();
            }

            updateCartUI() {
                const cartItemsContainer = document.getElementById('cartItems');
                const cartTotalElement = document.getElementById('cartTotal');
                const cartItemCountElement = document.getElementById('cartItemCount');

                // Clear existing cart items
                cartItemsContainer.innerHTML = '';

                // Populate cart items
                this.cart.forEach(item => {
                    const cartItemElement = document.createElement('div');
                    cartItemElement.className = 'cart-item d-flex justify-content-between align-items-center mb-2';
                    cartItemElement.innerHTML = `
                        <div class="d-flex align-items-center">
                            <img src="${item.imageUrl}" class="img-thumbnail me-2">
                            <div>
                                <h6 class="mb-0">${item.itemName}</h6>
                                <small>${item.currency} ${item.itemPrice}</small>
                            </div>
                        </div>
                        <div class="d-flex align-items-center">
                            <input type="number" 
                                   class="form-control form-control-sm" 
                                   value="${item.quantity}" 
                                   min="1" 
                                   style="width: 70px;"
                                   onchange="cartManager.updateQuantity(${item.id}, this.value)">
                            <button class="btn btn-danger btn-sm ms-2" 
                                    onclick="cartManager.removeFromCart(${item.id})">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemElement);
                });

                // Update total and item count
                cartTotalElement.textContent = `$${this.calculateTotal()}`;
                cartItemCountElement.textContent = this.cart.length;
            }

            showNotification(message) {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.className = `alert alert-success notification`;
                notification.textContent = message;
                
                container.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '1';
                }, 10);

                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => container.removeChild(notification), 300);
                }, 3000);
            }
        }

        // Marketplace Manager Class
        class MarketplaceManager {
            constructor() {
                this.items = [];
                this.categories = ['Electronics', 'Fashion', 'Home', 'Sports'];
                this.selectedCategory = null;
                this.loadItemsFromLocalStorage();
            }

            addItem(itemData) {
                const newItem = {
                    id: Date.now(),
                    ...itemData,
                    createdAt: new Date()
                };
                this.items.push(newItem);
                this.saveItemsToLocalStorage();
                this.renderItems();
                this.showNotification('Item listed successfully!');
                return newItem;
            }

            renderItems(filteredItems = null) {
                const container = document.getElementById('itemsContainer');
                container.innerHTML = '';

                const itemsToRender = filteredItems || this.items;

                if (itemsToRender.length === 0) {
                    container.innerHTML = `
                        <div class="col-12 text-center">
                            <p class="text-muted">No items found</p>
                        </div>
                    `;
                    return;
                }

                itemsToRender.forEach(item => {
                    const itemCard = document.createElement('div');
                    itemCard.className = 'col-md-4';
                    itemCard.innerHTML = `
                        <div class="card item-card h-100">
                            <img src="${item.imageUrl}" class="card-img-top" alt="${item.itemName}" style="height: 200px; object-fit: cover;">
                            <div class="card-body">
                                <h5 class="card-title">${item.itemName}</h5>
                                <p class="card-text">${item.itemDescription.substring(0, 100)}${item.itemDescription.length > 100 ? '...' : ''}</p>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span class="badge bg-primary">${item.category}</span>
                                    <strong>${item.currency} ${item.itemPrice}</strong>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="badge bg-secondary">Condition: ${item.itemCondition}</span>
                                    <button class="btn btn-success btn-sm" onclick="marketplaceManager.addToCart(${item.id})">
                                        <i class="bi bi-cart-plus me-1"></i>Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    container.appendChild(itemCard);
                });
            }

            addToCart(itemId) {
                const item = this.items.find(i => i.id === itemId);
                if (item) {
                    cartManager.addToCart(item);
                }
            }

            saveItemsToLocalStorage() {
                localStorage.setItem('marketplaceItems', JSON.stringify(this.items));
            }

            loadItemsFromLocalStorage() {
                const savedItems = localStorage.getItem('marketplaceItems');
                this.items = savedItems ? JSON.parse(savedItems) : [];
                this.renderItems();
            }

            showNotification(message, type = 'success') {
                const container = document.getElementById('notificationContainer');
                const notification = document.createElement('div');
                notification.className = `alert alert-${type} notification`;
                notification.textContent = message;
                
                container.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '1';
                }, 10);

                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => container.removeChild(notification), 300);
                }, 3000);
            }
        }

        // Global Instances
        const cartManager = new CartManager();
        const marketplaceManager = new MarketplaceManager();

        // Page Navigation Functions
        function showSellPage() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('sellPage').style.display = 'block';
            document.getElementById('buyPage').style.display = 'none';
        }

        function showBuyPage() {
            document.getElementById('landingPage').style.display = 'none';
            document.getElementById('sellPage').style.display = 'none';
            document.getElementById('buyPage').style.display = 'block';
            marketplaceManager.renderItems();
        }

        // Category Selection
        function selectCategory(category) {
            marketplaceManager.selectedCategory = category;
            marketplaceManager.showNotification(`Selected Category: ${category}`);
        }

        // Search and Filter Functions
        function searchItems() {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase();
            const filteredItems = marketplaceManager.items.filter(item => 
                item.itemName.toLowerCase().includes(searchQuery) ||
                item.itemDescription.toLowerCase().includes(searchQuery)
            );
            marketplaceManager.renderItems(filteredItems);
        }

        function filterItems(category) {
            const filteredItems = marketplaceManager.items.filter(item => 
                item.category === category
            );
            marketplaceManager.renderItems(filteredItems);
        }

        function applyPriceFilter() {
            const minPrice = document.getElementById('minPriceFilter').value;
            const maxPrice = document.getElementById('maxPriceFilter').value;

            const filteredItems = marketplaceManager.items.filter(item => {
                const price = parseFloat(item.itemPrice);
                return (!minPrice || price >= parseFloat(minPrice)) && 
                       (!maxPrice || price <= parseFloat(maxPrice));
            });

            marketplaceManager.renderItems(filteredItems);
        }

        // Checkout Function
        function checkoutCart() {
            if (cartManager.cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }

            // Simulate checkout process
            alert(`Checkout successful! Total: $${cartManager.calculateTotal()}`);
            
            // Clear cart
            cartManager.cart = [];
            cartManager.saveCartToLocalStorage();
            cartManager.updateCartUI();
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            const sellForm = document.getElementById('sellForm');
            
            sellForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const formData = new FormData(sellForm);
                
                const imageFile = formData.get('itemImage');
                const imageUrl = imageFile && imageFile.size > 0 
                    ? URL.createObjectURL(imageFile) 
                    : 'https://via.placeholder.com/300x200?text=No+Image';

                const itemData = {
                    itemName: formData.get('itemName'),
                    itemPrice: formData.get('itemPrice'),
                    currency: formData.get('currency'),
                    itemDescription: formData.get('itemDescription'),
                    imageUrl: imageUrl,
                    category: marketplaceManager.selectedCategory || 'Uncategorized',
                    itemCondition: formData.get('itemCondition')
                };

                marketplaceManager.addItem(itemData);
                sellForm.reset();
            });
        });

        

        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
