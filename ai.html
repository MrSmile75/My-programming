<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmileX AI - Complete Video Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX" crossorigin="anonymous"></script>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; object-src 'none';">
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --premium-gradient: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ff6b35 100%);
            --cyber-gradient: linear-gradient(135deg, #00d4ff 0%, #090979 50%, #020024 100%);
            --neon-blue: #00d4ff;
            --neon-purple: #b300ff;
            --neon-pink: #ff0080;
            --neon-green: #00ff88;
            --dark-bg: #0a0a0f;
            --darker-bg: #050508;
            --card-bg: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(255, 255, 255, 0.12);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --text-muted: rgba(255, 255, 255, 0.6);
            --border-color: rgba(255, 255, 255, 0.15);
            --shadow-light: 0 8px 32px rgba(31, 38, 135, 0.37);
            --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.6);
            --shadow-neon: 0 0 20px rgba(0, 212, 255, 0.5);
            --border-radius: 16px;
            --border-radius-lg: 24px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
                user-select: none;
           
        }

        /* ===== ANIMATED BACKGROUND ===== */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at center, var(--darker-bg) 0%, var(--dark-bg) 100%);
        }

        .parallax-layer {
            position: absolute;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
        }

        .bg-gradient {
            position: absolute;
            width: 200%;
            height: 200%;
            background: var(--cyber-gradient);
            opacity: 0.15;
            animation: rotate 30s linear infinite;
            border-radius: 50%;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s ease-in-out infinite;
            filter: blur(1px);
        }

        .shape:nth-child(1) { 
            width: 120px; height: 120px; top: 10%; left: 5%; 
            background: var(--neon-blue); animation-delay: 0s; 
        }
        .shape:nth-child(2) { 
            width: 80px; height: 80px; top: 70%; left: 85%; 
            background: var(--neon-purple); animation-delay: 3s; 
        }
        .shape:nth-child(3) { 
            width: 100px; height: 100px; top: 30%; left: 80%; 
            background: var(--neon-pink); animation-delay: 6s; 
        }
        .shape:nth-child(4) { 
            width: 60px; height: 60px; top: 80%; left: 15%; 
            background: var(--neon-green); animation-delay: 9s; 
        }

        /* ===== ANIMATIONS ===== */
        @keyframes rotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
            25% { transform: translateY(-30px) translateX(20px) rotate(90deg); }
            50% { transform: translateY(20px) translateX(-15px) rotate(180deg); }
            75% { transform: translateY(-10px) translateX(25px) rotate(270deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* ===== GLASS MORPHISM ===== */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-light);
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .glass-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-heavy), var(--shadow-neon);
            border-color: rgba(0, 212, 255, 0.3);
        }

        /* ===== HEADER ===== */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 0;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--border-color);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            font-weight: 900;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--accent-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.4);
        }

        .user-welcome {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: var(--premium-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--dark-bg);
        }

        .nav-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            white-space: nowrap;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.5);
        }

        .btn-secondary {
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--neon-blue);
        }

        .btn-premium {
            background: var(--premium-gradient);
            color: var(--dark-bg);
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .btn-premium:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(67, 233, 123, 0.3);
        }

        .btn-warning {
            background: var(--warning-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.1rem;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        /* ===== MAIN CONTAINER ===== */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* ===== HERO SECTION ===== */
        .hero-section {
            text-align: center;
            padding: 6rem 0;
            position: relative;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--neon-blue);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        .hero-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: var(--cyber-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat-number {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
        }

        .hero-stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* ===== INPUT SECTION ===== */
        .input-section {
            margin: 6rem 0;
        }

        .input-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        .input-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .input-title {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ===== TABS ===== */
        .tabs {
            width: 100%;
        }

        .tab-list {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .tab-trigger {
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tab-trigger.active {
            background: var(--accent-gradient);
            color: white;
            border-color: transparent;
        }

        .tab-trigger:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--neon-blue);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        /* ===== FORM ELEMENTS ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 1rem;
            font-family: inherit;
            transition: var(--transition);
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-input::placeholder, .form-textarea::placeholder {
            color: var(--text-muted);
        }

        /* ===== IMAGE UPLOAD ===== */
        .image-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 2rem;
        }

        .image-upload-area:hover {
            border-color: var(--neon-blue);
            background: rgba(0, 212, 255, 0.05);
        }

        .image-upload-area.dragover {
            border-color: var(--neon-green);
            background: rgba(0, 255, 136, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
        }

        .image-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        /* ===== GRID LAYOUTS ===== */
        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .grid-4 {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        /* ===== ANALYSIS RESULTS ===== */
        .analysis-status {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-top: 1rem;
            color: var(--neon-blue);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .analysis-result {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-top: 1rem;
            color: var(--neon-green);
        }

        .analysis-result strong {
            display: block;
            margin-bottom: 0.5rem;
        }

        /* ===== GENERATION OVERLAY ===== */
        .generation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            transition: var(--transition);
        }

        .generation-overlay.active {
            display: flex;
            opacity: 1;
        }

        .generation-content {
            text-align: center;
            max-width: 700px;
            padding: 3rem;
        }

        .generation-spinner {
            width: 150px;
            height: 150px;
            margin: 0 auto 3rem;
            position: relative;
        }

        .spinner-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        .spinner-ring:nth-child(1) {
            border-top: 3px solid var(--neon-blue);
        }

        .spinner-ring:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border-top: 3px solid var(--neon-purple);
            animation-duration: 1.5s;
            animation-direction: reverse;
        }

        .spinner-ring:nth-child(3) {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            border-top: 3px solid var(--neon-pink);
            animation-duration: 1s;
        }

        .generation-status {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .generation-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
        }

        .generation-details {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2rem;
        }

        .generation-details .grid {
            gap: 1rem;
            text-align: left;
        }

        .generation-detail {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: var(--border-radius);
        }

        .generation-detail-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .generation-detail-value {
            color: var(--text-primary);
            font-weight: 600;
            word-break: break-word;
        }

        /* ===== VIDEO SECTION ===== */
        .video-section {
            margin: 6rem 0;
            display: none;
        }

        .video-section.active {
            display: block;
            animation: fadeInUp 0.8s ease;
        }

        .video-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            text-align: center;
            box-shadow: var(--shadow-heavy);
        }

        .video-player-container {
            position: relative;
            display: inline-block;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-light);
            margin-bottom: 2rem;
        }

        .video-player {
            width: 100%;
            max-width: 900px;
            border-radius: var(--border-radius);
        }

        .watermark {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
            z-index: 10;
        }

        .video-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .video-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-top: 2rem;
        }

        /* ===== MODALS ===== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: var(--transition);
            padding: 2rem;
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: var(--shadow-heavy);
            width: 100%;
            max-width: 600px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        /* ===== DOWNLOAD OPTIONS ===== */
        .download-options {
            display: grid;
            gap: 1.5rem;
        }

        .download-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 2rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .download-option:hover {
            border-color: var(--neon-blue);
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .download-option.premium {
            border-color: rgba(255, 215, 0, 0.5);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 107, 53, 0.1));
        }

        .download-option.premium:hover {
            border-color: rgba(255, 215, 0, 0.8);
        }

        .download-option-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .download-option-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .download-option-info h3 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .download-option-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .download-option-features {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .download-option-features i {
            color: var(--neon-green);
            margin-right: 0.5rem;
        }

        .download-remaining {
            margin-top: 1rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* ===== PREMIUM FEATURES ===== */
        .premium-features {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .premium-feature {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
        }

        .premium-feature i {
            color: var(--neon-green);
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }

        .premium-feature span {
            font-size: 0.9rem;
        }

        .premium-price {
            text-align: center;
            margin: 2rem 0;
        }

        .premium-price-amount {
            font-size: 3.5rem;
            font-weight: 900;
            background: var(--premium-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .premium-price-description {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* ===== AD CONTAINER ===== */
        .ad-container {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 3rem;
            text-align: center;
            margin: 3rem 0;
            min-height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ad-placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .ad-placeholder i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
            display: block;
        }

        /* ===== NOTIFICATIONS ===== */
        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1rem 1.5rem;
            color: var(--text-primary);
            box-shadow: var(--shadow-light);
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 3000;
            max-width: 400px;
            min-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--neon-green);
        }

        .notification.error {
            border-left: 4px solid var(--neon-pink);
        }

        .notification.warning {
            border-left: 4px solid #fee140;
        }

        .notification.info {
            border-left: 4px solid var(--neon-blue);
        }

        /* ===== HISTORY ===== */
        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--neon-blue);
        }

        .history-thumbnail {
            width: 100%;
            aspect-ratio: 16/9;
            background: var(--darker-bg);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
        }

        .history-title {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .history-meta {
            display: flex;
            justify-content: between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .history-tags {
            display: flex;
            gap: 0.25rem;
            flex-wrap: wrap;
        }

        .history-tag {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
        }

        /* ===== UTILITIES ===== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .text-left {
            text-align: left;
        }

        .text-right {
            text-align: right;
        }

        .flex {
            display: flex;
        }

        .flex-center {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flex-between {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }

        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }

        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }

        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }

        .w-full { width: 100%; }
        .h-full { height: 100%; }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                text-align: center;
            }
            
            .nav-actions {
                justify-content: center;
            }
            
            .main-container {
                padding: 0 1rem;
            }
            
            .hero-section {
                padding: 3rem 0;
            }
            
            .hero-stats {
                gap: 2rem;
            }
            
            .input-card {
                padding: 2rem 1rem;
            }
            
            .modal-content {
                margin: 1rem;
                padding: 1.5rem;
            }
            
            .video-actions {
                flex-direction: column;
            }
            
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .tab-list {
                flex-direction: column;
            }
            
            .hero-title {
                font-size: 2.5rem;
            }
            
            .input-title {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .input-card {
                padding: 1.5rem 1rem;
            }
            
            .btn {
                padding: 0.75rem 1rem;
                font-size: 0.8rem;
            }
            
            .notification {
                top: 1rem;
                right: 1rem;
                left: 1rem;
                transform: translateY(-100%);
                max-width: none;
            }
            
            .notification.show {
                transform: translateY(0);
            }
        }

        /* ===== ACCESSIBILITY ===== */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        @media (prefers-contrast: high) {
            .glass, .glass-card {
                background: rgba(0, 0, 0, 0.9);
                border-color: rgba(255, 255, 255, 0.5);
            }
        }

        /* ===== FOCUS STYLES ===== */
        .btn:focus-visible,
        .form-input:focus-visible,
        .form-textarea:focus-visible,
        .form-select:focus-visible,
        .tab-trigger:focus-visible {
            outline: 2px solid var(--neon-blue);
            outline-offset: 2px;
        }

        /* ===== LOADING STATES ===== */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .loading-shimmer {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        /* ===== CUSTOM SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-gradient);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-gradient);
        }
    </style>
</head>
<body>
    <!-- Enhanced Animated Background -->
    <div class="animated-bg">
        <div class="parallax-layer">
            <div class="bg-gradient"></div>
        </div>
        <div class="parallax-layer">
            <div class="floating-shapes">
                <div class="shape"></div>
                <div class="shape"></div>
                <div class="shape"></div>
                <div class="shape"></div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-video"></i>
                </div>
                <div>
                    <div>SmileX AI</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Video Generator</div>
                </div>
            </div>
            
            <div class="user-welcome" id="userWelcome" style="display: none;">
                <span>Welcome back,</span>
                <div class="user-avatar" id="userAvatar"></div>
                <span id="userName"></span>
            </div>
            
            <div class="nav-actions">
                <button class="btn btn-secondary" onclick="toggleHistory()">
                    <i class="fas fa-history"></i>
                    History
                </button>
                <button class="btn btn-premium" id="premiumBtn" onclick="showPremiumModal()">
                    <i class="fas fa-crown"></i>
                    <span id="premiumBtnText">Go Premium</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-badge">
                <i class="fas fa-sparkles"></i>
                Next-Generation AI Video Technology with Advanced Features
            </div>
            
            <h1 class="hero-title">
                Create Cinematic<br>
                Videos with AI
            </h1>
            
            <p class="hero-subtitle">
                Transform your imagination into stunning, professional-quality videos using our revolutionary AI technology. 
                Upload images for reference, describe your vision in words, and watch AI bring your ideas to life with 
                advanced OpenAI integration and professional-grade processing.
            </p>

            <div class="hero-stats">
                <div class="hero-stat">
                    <div class="hero-stat-number" style="color: var(--neon-purple);">2.5M+</div>
                    <div class="hero-stat-label">Videos Generated</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number" style="color: var(--neon-blue);">150K+</div>
                    <div class="hero-stat-label">Active Creators</div>
                </div>
                <div class="hero-stat">
                    <div class="hero-stat-number" style="color: var(--neon-green);">4.9★</div>
                    <div class="hero-stat-label">User Rating</div>
                </div>
            </div>
        </section>

        <!-- Input Section -->
        <section class="input-section">
            <div class="input-card glass-card">
                <div class="input-header">
                    <h2 class="input-title">Create Your Video Masterpiece</h2>
                </div>
                
                <!-- Tabs -->
                <div class="tabs">
                    <div class="tab-list">
                        <button class="tab-trigger active" onclick="switchTab('text')" data-tab="text">
                            <i class="fas fa-keyboard"></i>
                            Text Description
                        </button>
                        <button class="tab-trigger" onclick="switchTab('image')" data-tab="image">
                            <i class="fas fa-image"></i>
                            Image + Description
                        </button>
                    </div>
                    
                    <!-- Text Tab -->
                    <div class="tab-content active" id="textTab">
                        <div class="form-group">
                            <label class="form-label">Describe your video vision in detail</label>
                            <textarea 
                                class="form-textarea" 
                                id="videoPrompt" 
                                placeholder="A majestic dragon soaring through a mystical forest at golden hour, with magical particles floating in the air, cinematic lighting, smooth camera movements, 4K quality..."
                                maxlength="1000"
                            ></textarea>
                            <div class="flex-between mt-2">
                                <span id="wordCount" style="color: var(--text-muted); font-size: 0.9rem;">0 words</span>
                                <span id="charCount" style="color: var(--text-muted); font-size: 0.9rem;">0/1000 characters</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Image Tab -->
                    <div class="tab-content" id="imageTab">
                        <div class="grid grid-2">
                            <div>
                                <label class="form-label">Upload Reference Image</label>
                                <div class="image-upload-area" id="imageUploadArea" onclick="document.getElementById('imageInput').click()">
                                    <div id="imageUploadContent">
                                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Upload an image</h3>
                                        <p style="color: var(--text-muted); font-size: 0.9rem;">PNG, JPG, GIF up to 10MB</p>
                                        <p style="color: var(--text-muted); font-size: 0.8rem; margin-top: 0.5rem;">Drag & drop or click to browse</p>
                                    </div>
                                    <div id="imagePreviewContainer" class="hidden">
                                        <img id="imagePreview" class="image-preview" alt="Uploaded image">
                                        <button class="btn btn-secondary btn-sm" onclick="removeImage()">
                                            <i class="fas fa-trash"></i>
                                            Remove Image
                                        </button>
                                    </div>
                                </div>
                                <input type="file" id="imageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                            </div>
                            
                            <div>
                                <label class="form-label">Additional Description</label>
                                <textarea 
                                    class="form-textarea" 
                                    id="imagePrompt" 
                                    placeholder="Describe how you want the video to look based on your image... Add camera movements, effects, lighting changes..."
                                    style="height: 200px;"
                                ></textarea>
                                
                                <div id="analysisStatus" class="analysis-status hidden">
                                    <i class="fas fa-eye"></i>
                                    <span>AI is analyzing your image...</span>
                                </div>
                                
                                <div id="analysisResult" class="analysis-result hidden">
                                    <strong>AI Image Analysis:</strong>
                                    <p id="analysisText"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Generation Controls -->
                <div class="grid grid-4 mt-4">
                    <div class="form-group">
                        <label class="form-label">Video Style</label>
                        <select class="form-select" id="videoStyle">
                            <option value="realistic">Realistic</option>
                            <option value="animated">Animated</option>
                            <option value="cinematic">Cinematic</option>
                            <option value="artistic">Artistic</option>
                            <option value="fantasy">Fantasy</option>
                            <option value="sci-fi">Sci-Fi</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Duration</label>
                        <select class="form-select" id="videoDuration">
                            <option value="15">15 seconds</option>
                            <option value="30">30 seconds</option>
                            <option value="60" class="premium-option">60 seconds (Premium)</option>
                            <option value="120" class="premium-option">120 seconds (Premium)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Quality</label>
                        <div class="form-input" style="background: rgba(255, 255, 255, 0.02); cursor: not-allowed;">
                            <span id="qualityDisplay">1080p HD (Free)</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Status</label>
                        <div class="form-input" style="background: rgba(255, 255, 255, 0.02); cursor: not-allowed;">
                            <span id="userStatus">Free: 3 generations remaining</span>
                        </div>
                    </div>
                </div>
                
                <!-- Generate Button -->
                <div class="flex-between mt-4">
                    <div style="color: var(--text-muted); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i>
                        <span id="trialsInfo">Free users get 3 daily generations</span>
                    </div>
                    
                    <button class="btn btn-primary btn-lg" id="generateBtn" onclick="startGeneration()">
                        <i class="fas fa-magic"></i>
                        <span id="generateBtnText">Generate Video</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Google Ads Container for Non-Premium Users -->
        <div class="ad-container" id="adContainer">
            <div class="ad-placeholder">
                <i class="fas fa-rectangle-ad"></i>
                <h3>Video Advertisement</h3>
                <p>Your Google Video Ads code goes here</p>
                <small>This ad will be hidden for Premium subscribers</small>
                <!-- INSERT YOUR GOOGLE ADS CODE BELOW -->
                <!-- 
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-XXXXXXXXXX"
                     data-ad-slot="XXXXXXXXXX"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                -->
            </div>
        </div>

        <!-- Video Section -->
        <section class="video-section" id="videoSection">
            <div class="video-card glass-card">
                <h2 style="margin-bottom: 2rem; text-align: center; font-family: 'Orbitron', monospace; background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    <i class="fas fa-play-circle"></i>
                    Your AI-Generated Masterpiece
                </h2>
                
                <div class="video-player-container">
                    <video class="video-player" id="videoPlayer" controls poster="">
                        <source src="/placeholder.svg" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div class="watermark" id="videoWatermark" style="display: none;">SmileX AI</div>
                </div>
                
                <div class="video-actions">
                    <button class="btn btn-secondary" onclick="regenerateVideo()">
                        <i class="fas fa-redo"></i>
                        Regenerate
                    </button>
                    <button class="btn btn-success" onclick="showDownloadModal()">
                        <i class="fas fa-download"></i>
                        Download
                    </button>
                    <button class="btn btn-secondary" onclick="shareVideo()">
                        <i class="fas fa-share"></i>
                        Share
                    </button>
                    <button class="btn btn-secondary" onclick="addToFavorites()">
                        <i class="fas fa-heart"></i>
                        Favorite
                    </button>
                </div>
                
                <div class="video-info">
                    <div class="flex-center gap-2">
                        <i class="fas fa-info-circle"></i>
                        <span id="videoInfoText">Free users: 3 regenerations remaining today</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Welcome Modal -->
    <div class="modal" id="welcomeModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-rocket"></i>
                    Welcome to SmileX AI
                </h2>
            </div>
            <div>
                <p style="color: var(--text-secondary); margin-bottom: 2rem; line-height: 1.6;">
                    Enter your name to personalize your experience and unlock the power of AI video generation. 
                    Your progress and creations will be saved automatically.
                </p>
                <div class="form-group">
                    <input type="text" class="form-input" id="nameInput" placeholder="Enter your name..." maxlength="50">
                </div>
                <button class="btn btn-primary w-full btn-lg" onclick="saveUserName()">
                    <i class="fas fa-rocket"></i>
                    Get Started
                </button>
            </div>
        </div>
    </div>

    <!-- Generation Overlay -->
    <div class="generation-overlay" id="generationOverlay">
        <div class="generation-content">
            <div class="generation-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            
            <div class="generation-status" id="generationStatus">
                Initializing AI Engine...
            </div>
            
            <div class="generation-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="generation-details">
                <div class="grid grid-4">
                    <div class="generation-detail">
                        <div class="generation-detail-label">Prompt</div>
                        <div class="generation-detail-value" id="promptDisplay">-</div>
                    </div>
                    <div class="generation-detail">
                        <div class="generation-detail-label">Style</div>
                        <div class="generation-detail-value" id="styleDisplay">-</div>
                    </div>
                    <div class="generation-detail">
                        <div class="generation-detail-label">Duration</div>
                        <div class="generation-detail-value" id="durationDisplay">-</div>
                    </div>
                    <div class="generation-detail">
                        <div class="generation-detail-label">Quality</div>
                        <div class="generation-detail-value" id="qualityDisplayGen">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Download Modal -->
    <div class="modal" id="downloadModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-download"></i>
                    Download Options
                </h2>
                <button class="modal-close" onclick="closeModal('downloadModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="download-options">
                <div class="download-option premium" onclick="downloadVideo('premium')">
                    <div class="download-option-header">
                        <div class="download-option-icon" style="background: var(--premium-gradient);">
                            <i class="fas fa-crown" style="color: var(--dark-bg);"></i>
                        </div>
                        <div class="download-option-info">
                            <h3 style="color: var(--text-primary);">Premium Download</h3>
                            <p>Ultimate quality and features</p>
                        </div>
                    </div>
                    <div class="download-option-features">
                        <div><i class="fas fa-check"></i> 4K Ultra HD Quality (3840x2160)</div>
                        <div><i class="fas fa-check"></i> No Watermarks or Branding</div>
                        <div><i class="fas fa-check"></i> No Advertisements</div>
                        <div><i class="fas fa-check"></i> Instant Download</div>
                        <div><i class="fas fa-check"></i> Commercial Usage Rights</div>
                        <div><i class="fas fa-check"></i> Multiple Format Options (MP4, MOV, AVI)</div>
                    </div>
                </div>
                
                <div class="download-option" onclick="downloadVideo('free')">
                    <div class="download-option-header">
                        <div class="download-option-icon" style="background: var(--success-gradient);">
                            <i class="fas fa-download" style="color: white;"></i>
                        </div>
                        <div class="download-option-info">
                            <h3 style="color: var(--text-primary);">Free Download</h3>
                            <p>Standard quality with limitations</p>
                        </div>
                    </div>
                    <div class="download-option-features">
                        <div><i class="fas fa-check"></i> 1080p HD Quality (1920x1080)</div>
                        <div><i class="fas fa-check"></i> SmileX Watermark Included</div>
                        <div><i class="fas fa-check"></i> Watch 30-second Ad First</div>
                        <div><i class="fas fa-check"></i> Limited Downloads per Day (3)</div>
                        <div><i class="fas fa-check"></i> Personal Use Only</div>
                        <div><i class="fas fa-check"></i> MP4 Format Only</div>
                    </div>
                    <div class="download-remaining">
                        <span id="downloadsRemaining">Downloads remaining today: 3</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Premium Modal -->
    <div class="modal" id="premiumModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-crown" style="color: #ffd700;"></i>
                    SmileX Premium Subscription
                </h2>
                <button class="modal-close" onclick="closeModal('premiumModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div>
                <div class="premium-price">
                    <div class="premium-price-amount">Premium Subscription</div>
                    <div class="premium-price-description">Unlock unlimited creativity with our premium subscription</div>
                </div>
                
                <div class="premium-features">
                    <div class="premium-feature">
                        <i class="fas fa-infinity"></i>
                        <span>Unlimited video generations per month</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-clock"></i>
                        <span>Extended video lengths (60s & 120s)</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-gem"></i>
                        <span>4K Ultra HD quality downloads</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-shield-alt"></i>
                        <span>No watermarks or branding</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-ban"></i>
                        <span>Completely ad-free experience</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-rocket"></i>
                        <span>Priority processing queue</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-brain"></i>
                        <span>Access to advanced AI models</span>
                    </div>
                    <div class="premium-feature">
                        <i class="fas fa-headset"></i>
                        <span>24/7 premium support</span>
                    </div>
                </div>
                
              
            </div>
        </div>
    </div>

    <!-- History Modal -->
    <div class="modal" id="historyModal">
        <div class="modal-content" style="max-width: 1000px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-history"></i>
                    Generation History
                </h2>
                <button class="modal-close" onclick="closeModal('historyModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="historyContent">
                <div class="text-center" style="padding: 3rem; color: var(--text-muted);">
                    <i class="fas fa-video" style="font-size: 4rem; opacity: 0.3; margin-bottom: 1rem;"></i>
                    <h3>No videos generated yet</h3>
                    <p>Start creating amazing videos with AI!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Modal -->
    <div class="modal" id="adModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-rectangle-ad"></i>
                    Advertisement
                </h2>
            </div>
            <div style="padding: 2rem 0; text-align: center;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 3rem; border-radius: var(--border-radius); margin-bottom: 2rem; min-height: 200px; display: flex; align-items: center; justify-content: center;">
                    <div style="color: var(--text-muted);">
                        <div style="font-size: 4rem; margin-bottom: 1rem;">📺</div>
                        <div>Video Advertisement</div>
                        <div style="font-size: 0.9rem; margin-top: 0.5rem;">Your Google Video Ad Here</div>
                    </div>
                </div>
                <div style="font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem;">
                    Please wait <span id="adCountdown">30</span> seconds...
                </div>
                <div class="generation-progress">
                    <div class="progress-bar" id="adProgressBar"></div>
                </div>
                <p style="color: var(--text-secondary); font-size: 0.9rem;">Your download will start automatically after the ad</p>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            OPENAI_API_KEY: 'your-openai-api-key-here', // Replace with your actual OpenAI API key
            OPENAI_API_URL: 'https://api.openai.com/v1/chat/completions',
            VISION_API_URL: 'https://api.openai.com/v1/chat/completions',
            GOOGLE_ADS_CLIENT: 'ca-pub-XXXXXXXXXX', // Replace with your Google Ads client ID
            MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB
            MAX_PROMPT_LENGTH: 1000,
            GENERATION_TIMEOUT: 300000, // 5 minutes
            API_TIMEOUT: 30000 // 30 seconds
        };

        // ===== USER DATA MANAGEMENT =====
        let userData = {
            name: '',
            isPremium: false,
            isSubscribed: false,
            trialsRemaining: 3,
            generationHistory: [],
            dailyDownloads: 0,
            lastDownloadDate: null,
            subscriptionDate: null,
            subscriptionId: null,
            uploadedImages: [],
            favorites: [],
            settings: {
                autoSave: true,
                notifications: true,
                quality: 'auto'
            }
        };

        // ===== CURRENT GENERATION DATA =====
        let currentGeneration = {
            id: null,
            prompt: '',
            imagePrompt: '',
            uploadedImage: null,
            style: 'realistic',
            duration: 15,
            quality: '1080p HD',
            videoUrl: '',
            hasWatermark: true,
            timestamp: null,
            enhancedPrompt: '',
            processingTime: 0,
            thumbnail: null
        };

        // ===== STATE MANAGEMENT =====
        let appState = {
            isGenerating: false,
            isAnalyzing: false,
            isDownloading: false,
            currentTab: 'text',
            generationProgress: {
                stage: '',
                progress: 0,
                estimatedTime: 0
            }
        };

        // ===== PYTHON INTEGRATION SIMULATION =====
        class PythonVideoProcessor {
            static async processVideo(videoData, options) {
                console.log('Python: Processing video with options:', options);
                
                // Simulate Python video processing
                await this.sleep(2000);
                
                return {
                    success: true,
                    processedVideoUrl: videoData.url,
                    watermarkApplied: options.addWatermark,
                    quality: options.quality,
                    processingTime: Date.now() - videoData.startTime
                };
            }
            
            static async enhancePrompt(prompt, style, duration) {
                console.log('Python: Enhancing prompt with AI models');
                
                // Simulate Python AI enhancement
                await this.sleep(1500);
                
                const enhancements = {
                    realistic: 'with photorealistic rendering, natural lighting, and cinematic camera work',
                    animated: 'with smooth animation, vibrant colors, and dynamic character movements',
                    cinematic: 'with professional cinematography, dramatic lighting, and epic camera angles',
                    artistic: 'with artistic flair, creative visual effects, and unique aesthetic style',
                    fantasy: 'with magical elements, mystical atmosphere, and fantastical visual effects',
                    'sci-fi': 'with futuristic elements, advanced technology, and sci-fi visual effects'
                };
                
                return `${prompt} Enhanced with ${style} cinematography, optimized for ${duration} seconds duration with professional lighting and smooth camera movements. ${enhancements[style] || ''}`;
            }
            
            static async analyzeImage(imageData) {
                console.log('Python: Analyzing image with computer vision');
                
                // Simulate Python image analysis
                await this.sleep(2000);
                
                const analyses = [
                    "A beautifully composed scene with rich colors and dynamic lighting, perfect for cinematic video generation with smooth transitions and atmospheric effects.",
                    "An artistic composition featuring dramatic contrasts and compelling visual elements, ideal for creating engaging video content with fluid camera movements.",
                    "A visually striking image with excellent depth and composition, suitable for generating high-quality video with professional cinematography techniques.",
                    "A captivating scene with vibrant colors and interesting textures, perfect for AI video generation with creative camera work and visual storytelling.",
                    "An impressive composition with strong visual impact, ideal for creating dynamic video content with cinematic flair and professional production values."
                ];
                
                return analyses[Math.floor(Math.random() * analyses.length)];
            }
            
            static async applyWatermark(videoPath, watermarkText = "SmileX AI") {
                console.log('Python: Applying watermark to video');
                
                // Simulate Python watermark processing
                await this.sleep(3000);
                
                return {
                    success: true,
                    watermarkedPath: videoPath.replace('.mp4', '_watermarked.mp4'),
                    watermarkText: watermarkText
                };
            }
            
            static async generateVideo(promptData, userPremium = false) {
                console.log('Python: Generating video with advanced AI models');
                
                // Calculate realistic generation time
                const baseTime = promptData.duration * 2000; // 2 seconds per video second
                const qualityMultiplier = userPremium ? 2 : 1;
                const styleMultiplier = this.getStyleComplexity(promptData.style);
                
                const estimatedTime = baseTime * qualityMultiplier * styleMultiplier;
                
                // Simulate progressive generation
                const stages = [
                    { name: "Initializing AI models", duration: 0.1, progress: 5 },
                    { name: "Analyzing prompt complexity", duration: 0.15, progress: 15 },
                    { name: "Processing visual elements", duration: 0.2, progress: 30 },
                    { name: "Generating keyframes", duration: 0.25, progress: 50 },
                    { name: "Creating smooth transitions", duration: 0.2, progress: 70 },
                    { name: "Applying effects and lighting", duration: 0.15, progress: 85 },
                    { name: "Rendering final video", duration: 0.05, progress: 100 }
                ];
                
                for (const stage of stages) {
                    const stageDuration = estimatedTime * stage.duration;
                    await this.sleep(Math.min(stageDuration, 5000)); // Cap at 5 seconds for demo
                    
                    // Update progress
                    updateGenerationProgress(stage.name, stage.progress);
                }
                
                // Generate sample video URL
                const sampleVideos = [
                    "https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4",
                    "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
                    "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",
                    "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4",
                    "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4"
                ];
                
                return {
                    success: true,
                    videoUrl: sampleVideos[Math.floor(Math.random() * sampleVideos.length)],
                    thumbnail: `https://picsum.photos/320/180?random=${Date.now()}`,
                    processingTime: estimatedTime,
                    quality: userPremium ? "4K Ultra HD" : "1080p HD",
                    hasWatermark: !userPremium
                };
            }
            
            static getStyleComplexity(style) {
                const complexity = {
                    realistic: 1.0,
                    animated: 1.2,
                    cinematic: 1.5,
                    artistic: 1.3,
                    fantasy: 1.4,
                    'sci-fi': 1.6
                };
                return complexity[style] || 1.0;
            }
            
            static async sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // ===== OPENAI INTEGRATION =====
        class OpenAIIntegration {
            static async analyzeImage(imageData) {
                if (!CONFIG.OPENAI_API_KEY || CONFIG.OPENAI_API_KEY === 'your-openai-api-key-here') {
                    // Fallback to Python simulation
                    return await PythonVideoProcessor.analyzeImage(imageData);
                }
                
                try {
                    const base64Image = imageData.split(',')[1]; // Remove data URL prefix
                    
                    const response = await fetch(CONFIG.VISION_API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${CONFIG.OPENAI_API_KEY}`
                        },
                        body: JSON.stringify({
                            model: "gpt-4-vision-preview",
                            messages: [
                                {
                                    role: "user",
                                    content: [
                                        {
                                            type: "text",
                                            text: "Analyze this image and provide a detailed, cinematic description perfect for AI video generation. Focus on visual elements, mood, lighting, composition, colors, movements, and atmosphere. Be creative and descriptive, using professional cinematography terms. Keep it under 200 words but make it vivid and engaging for video creation."
                                        },
                                        {
                                            type: "image_url",
                                            image_url: {
                                                url: imageData,
                                                detail: "high"
                                            }
                                        }
                                    ]
                                }
                            ],
                            max_tokens: 300,
                            temperature: 0.8
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`API request failed: ${response.status}`);
                    }

                    const data = await response.json();
                    return data.choices[0]?.message?.content || await PythonVideoProcessor.analyzeImage(imageData);
                    
                } catch (error) {
                    console.error('OpenAI Vision API error:', error);
                    return await PythonVideoProcessor.analyzeImage(imageData);
                }
            }
            
            static async enhancePrompt(prompt, imagePrompt, style, duration) {
                if (!CONFIG.OPENAI_API_KEY || CONFIG.OPENAI_API_KEY === 'your-openai-api-key-here') {
                    // Fallback to Python simulation
                    return await PythonVideoProcessor.enhancePrompt(prompt, style, duration);
                }
                
                try {
                    const combinedPrompt = imagePrompt ? 
                        `${prompt} Based on image: ${imagePrompt}` : prompt;
                    
                    const response = await fetch(CONFIG.OPENAI_API_URL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${CONFIG.OPENAI_API_KEY}`
                        },
                        body: JSON.stringify({
                            model: "gpt-4",
                            messages: [
                                {
                                    role: "system",
                                    content: `You are an expert at creating detailed video generation prompts. Enhance the user's prompt to be more specific and cinematic, considering the style (${style}) and duration (${duration}s). Focus on visual details, camera movements, lighting, atmosphere, and specific cinematography techniques. Keep the enhanced prompt under 300 words but make it vivid and specific for AI video generation.`
                                },
                                {
                                    role: "user",
                                    content: `Enhance this video prompt for ${style} style, ${duration} seconds duration: "${combinedPrompt}"`
                                }
                            ],
                            max_tokens: 400,
                            temperature: 0.8
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`API request failed: ${response.status}`);
                    }

                    const data = await response.json();
                    return data.choices[0]?.message?.content || combinedPrompt;
                    
                } catch (error) {
                    console.error('Prompt enhancement failed:', error);
                    return await PythonVideoProcessor.enhancePrompt(prompt, style, duration);
                }
            }
        }

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            setupEventListeners();
            checkUserWelcome();
            updateUI();
            initializeWordCounter();
            initializeGoogleAds();
        });

        // ===== USER DATA MANAGEMENT =====
        function loadUserData() {
            const saved = localStorage.getItem('smileXUserData');
            if (saved) {
                try {
                    const parsedData = JSON.parse(saved);
                    userData = { ...userData, ...parsedData };
                } catch (error) {
                    console.error('Error loading user data:', error);
                }
            }
            
            // Reset daily downloads if new day
            const today = new Date().toDateString();
            if (userData.lastDownloadDate !== today) {
                userData.dailyDownloads = 0;
                userData.lastDownloadDate = today;
                saveUserData();
            }
            
            // Check subscription status
            checkSubscriptionStatus();
        }

        function saveUserData() {
            try {
                localStorage.setItem('smileXUserData', JSON.stringify(userData));
            } catch (error) {
                console.error('Error saving user data:', error);
            }
        }

        function checkSubscriptionStatus() {
            if (userData.subscriptionId && userData.subscriptionDate) {
                const subscriptionDate = new Date(userData.subscriptionDate);
                const now = new Date();
                const daysDiff = (now - subscriptionDate) / (1000 * 60 * 60 * 24);
                
                // Check if subscription is still valid (30 days)
                if (daysDiff <= 30) {
                    userData.isPremium = true;
                    userData.isSubscribed = true;
                } else {
                    userData.isPremium = false;
                    userData.isSubscribed = false;
                    userData.subscriptionId = null;
                    userData.subscriptionDate = null;
                    saveUserData();
                    showNotification('Your premium subscription has expired', 'warning');
                }
            }
        }

        function checkUserWelcome() {
            if (!userData.name) {
                setTimeout(() => {
                    document.getElementById('welcomeModal').classList.add('active');
                }, 1000);
            } else {
                showUserWelcome();
            }
        }

        function saveUserName() {
            const nameInput = document.getElementById('nameInput');
            const name = nameInput.value.trim();
            
            if (!name) {
                showNotification('Please enter your name', 'error');
                return;
            }
            
            if (name.length < 2) {
                showNotification('Name must be at least 2 characters long', 'error');
                return;
            }
            
            if (name.length > 50) {
                showNotification('Name must be less than 50 characters', 'error');
                return;
            }
            
            userData.name = name;
            saveUserData();
            
            document.getElementById('welcomeModal').classList.remove('active');
            showUserWelcome();
            showNotification(`Welcome to SmileX AI, ${name}! 🚀`, 'success');
        }

        function showUserWelcome() {
            const welcomeEl = document.getElementById('userWelcome');
            const userNameEl = document.getElementById('userName');
            const userAvatarEl = document.getElementById('userAvatar');
            
            if (userData.name) {
                userNameEl.textContent = userData.name;
                userAvatarEl.textContent = userData.name.charAt(0).toUpperCase();
                welcomeEl.style.display = 'flex';
            }
        }

        // ===== EVENT LISTENERS =====
        function setupEventListeners() {
            const videoPrompt = document.getElementById('videoPrompt');
            const imagePrompt = document.getElementById('imagePrompt');
            const nameInput = document.getElementById('nameInput');
            const imageInput = document.getElementById('imageInput');
            const uploadArea = document.getElementById('imageUploadArea');
            
            // Text input counters
            videoPrompt.addEventListener('input', updateWordCounter);
            imagePrompt.addEventListener('input', updateWordCounter);
            
            // Enter key shortcuts
            videoPrompt.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    startGeneration();
                }
            });
            
            nameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    saveUserName();
                }
            });
            
            // File upload
            imageInput.addEventListener('change', handleImageUpload);
            
            // Drag and drop
            uploadArea.addEventListener('dragover', handleDragOver);
            uploadArea.addEventListener('dragleave', handleDragLeave);
            uploadArea.addEventListener('drop', handleFileDrop);
            
            // Close modals on outside click
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });
            
            // Prevent right-click for security
            document.addEventListener('contextmenu', e => e.preventDefault());
            
            // Handle window resize
            window.addEventListener('resize', handleResize);
            
            // Handle online/offline status
            window.addEventListener('online', () => {
                showNotification('Connection restored! 🌐', 'success');
            });
            
            window.addEventListener('offline', () => {
                showNotification('You are offline. Some features may not work.', 'warning');
            });
        }

        function handleResize() {
            // Adjust UI for different screen sizes
            const isMobile = window.innerWidth <= 768;
            const navContainer = document.querySelector('.nav-container');
            
            if (isMobile) {
                navContainer.style.flexDirection = 'column';
            } else {
                navContainer.style.flexDirection = 'row';
            }
        }

        // ===== WORD COUNTER =====
        function initializeWordCounter() {
            updateWordCounter();
        }

        function updateWordCounter() {
            const videoPrompt = document.getElementById('videoPrompt');
            const imagePrompt = document.getElementById('imagePrompt');
            const wordCountEl = document.getElementById('wordCount');
            const charCountEl = document.getElementById('charCount');
            
            const activeTab = document.querySelector('.tab-content.active');
            const isTextTab = activeTab && activeTab.id === 'textTab';
            
            const text = isTextTab ? videoPrompt.value.trim() : 
                        (videoPrompt.value.trim() + ' ' + imagePrompt.value.trim()).trim();
            
            const words = text === '' ? 0 : text.split(/\s+/).filter(word => word.length > 0).length;
            const chars = isTextTab ? videoPrompt.value.length : videoPrompt.value.length + imagePrompt.value.length;
            
            if (wordCountEl) wordCountEl.textContent = `${words} words`;
            if (charCountEl) charCountEl.textContent = `${chars}/${CONFIG.MAX_PROMPT_LENGTH} characters`;
            
            // Color coding based on word count
            if (wordCountEl) {
                if (words > 100) {
                    wordCountEl.style.color = '#fa709a';
                } else if (words > 50) {
                    wordCountEl.style.color = '#fee140';
                } else if (words > 0) {
                    wordCountEl.style.color = 'var(--neon-green)';
                } else {
                    wordCountEl.style.color = 'var(--text-muted)';
                }
            }
        }

        // ===== TAB MANAGEMENT =====
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-trigger').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            appState.currentTab = tabName;
            updateWordCounter();
        }

        // ===== IMAGE UPLOAD =====
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                processImageFile(file);
            }
        }

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }

        function handleFileDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            
            const files = event.dataTransfer.files;
            if (files.length > 0) {
                processImageFile(files[0]);
            }
        }

        async function processImageFile(file) {
            // Validate file
            if (!file.type.startsWith('image/')) {
                showNotification('Please select a valid image file', 'error');
                return;
            }
            
            if (file.size > CONFIG.MAX_FILE_SIZE) {
                showNotification('File size must be less than 10MB', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = async function(e) {
                const imageData = e.target.result;
                
                // Show image preview
                const preview = document.getElementById('imagePreview');
                const uploadContent = document.getElementById('imageUploadContent');
                const previewContainer = document.getElementById('imagePreviewContainer');
                
                preview.src = imageData;
                uploadContent.classList.add('hidden');
                previewContainer.classList.remove('hidden');
                
                // Store uploaded image
                currentGeneration.uploadedImage = imageData;
                userData.uploadedImages.push({
                    id: Date.now(),
                    data: imageData,
                    timestamp: new Date().toISOString(),
                    filename: file.name
                });
                saveUserData();
                
                // Show analysis status
                document.getElementById('analysisStatus').classList.remove('hidden');
                document.getElementById('analysisResult').classList.add('hidden');
                appState.isAnalyzing = true;
                
                try {
                    // Analyze image with AI
                    const analysis = await OpenAIIntegration.analyzeImage(imageData);
                    
                    // Hide analysis status and show result
                    document.getElementById('analysisStatus').classList.add('hidden');
                    document.getElementById('analysisResult').classList.remove('hidden');
                    document.getElementById('analysisText').textContent = analysis;
                    
                    // Auto-fill image prompt
                    document.getElementById('imagePrompt').value = analysis;
                    currentGeneration.imagePrompt = analysis;
                    
                    updateWordCounter();
                    showNotification('Image analyzed successfully! 🎯', 'success');
                    
                } catch (error) {
                    console.error('Image analysis failed:', error);
                    document.getElementById('analysisStatus').classList.add('hidden');
                    showNotification('Image analysis failed. Please try again.', 'error');
                } finally {
                    appState.isAnalyzing = false;
                }
            };
            
            reader.readAsDataURL(file);
        }

        function removeImage() {
            document.getElementById('imageUploadContent').classList.remove('hidden');
            document.getElementById('imagePreviewContainer').classList.add('hidden');
            document.getElementById('imageInput').value = '';
            document.getElementById('analysisResult').classList.add('hidden');
            currentGeneration.uploadedImage = null;
            currentGeneration.imagePrompt = '';
            document.getElementById('imagePrompt').value = '';
            updateWordCounter();
        }

        // ===== VIDEO GENERATION =====
        async function startGeneration() {
            const videoPrompt = document.getElementById('videoPrompt').value.trim();
            const imagePrompt = document.getElementById('imagePrompt').value.trim();
            const activeTab = document.querySelector('.tab-content.active');
            const isImageTab = activeTab && activeTab.id === 'imageTab';
            
            // Validation
            if (!videoPrompt && !imagePrompt) {
                showNotification('Please provide a description or upload an image', 'error');
                return;
            }
            
            if (!isImageTab && videoPrompt.split(/\s+/).length < 5) {
                showNotification('Please provide a more detailed description (at least 5 words)', 'error');
                return;
            }
            
            if (isImageTab && !currentGeneration.uploadedImage) {
                showNotification('Please upload an image first', 'error');
                return;
            }
            
            // Check trials
            if (!userData.isPremium && userData.trialsRemaining <= 0) {
                showNotification('No generations remaining. Subscribe to Premium for unlimited access!', 'warning');
                showPremiumModal();
                return;
            }
            
            // Get generation parameters
            const style = document.getElementById('videoStyle').value;
            const duration = parseInt(document.getElementById('videoDuration').value);
            const quality = userData.isPremium ? '4K Ultra HD' : '1080p HD';
            
            // Check premium requirements
            if (duration > 30 && !userData.isPremium) {
                showNotification('Premium subscription required for longer videos', 'warning');
                showPremiumModal();
                return;
            }
            
            // Prepare generation data
            currentGeneration = {
                id: Date.now().toString(),
                prompt: videoPrompt,
                imagePrompt: imagePrompt,
                uploadedImage: currentGeneration.uploadedImage,
                style: style,
                duration: duration,
                quality: quality,
                hasWatermark: !userData.isPremium,
                timestamp: new Date().toISOString()
            };
            
            // Start generation process
            await generateVideoWithAI();
        }

        async function generateVideoWithAI() {
            const overlay = document.getElementById('generationOverlay');
            
            // Update display values
            document.getElementById('promptDisplay').textContent = 
                (currentGeneration.prompt || currentGeneration.imagePrompt).substring(0, 40) + '...';
            document.getElementById('styleDisplay').textContent = currentGeneration.style;
            document.getElementById('durationDisplay').textContent = currentGeneration.duration + 's';
            document.getElementById('qualityDisplayGen').textContent = currentGeneration.quality;
            
            // Show generation overlay
            overlay.classList.add('active');
            appState.isGenerating = true;
            
            // Disable generate button
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = true;
            generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
            
            try {
                // Step 1: Enhance prompt with AI
                updateGenerationProgress('Enhancing prompt with AI...', 10);
                await sleep(2000);
                
                const enhancedPrompt = await OpenAIIntegration.enhancePrompt(
                    currentGeneration.prompt, 
                    currentGeneration.imagePrompt, 
                    currentGeneration.style, 
                    currentGeneration.duration
                );
                
                currentGeneration.enhancedPrompt = enhancedPrompt;
                
                // Step 2: Generate video using Python integration
                const videoResult = await PythonVideoProcessor.generateVideo(currentGeneration, userData.isPremium);
                
                if (videoResult.success) {
                    currentGeneration.videoUrl = videoResult.videoUrl;
                    currentGeneration.thumbnail = videoResult.thumbnail;
                    currentGeneration.processingTime = videoResult.processingTime;
                    
                    // Add to history
                    const newHistory = [currentGeneration, ...userData.generationHistory].slice(0, 50);
                    userData.generationHistory = newHistory;
                    
                    // Update trials for non-premium users
                    if (!userData.isPremium) {
                        userData.trialsRemaining = Math.max(0, userData.trialsRemaining - 1);
                    }
                    
                    saveUserData();
                    
                    // Show generated video
                    showGeneratedVideo();
                    updateUI();
                    
                    showNotification(`Video generated successfully! Quality: ${currentGeneration.quality} 🎬`, 'success');
                } else {
                    throw new Error('Video generation failed');
                }
                
            } catch (error) {
                console.error('Generation error:', error);
                showNotification('Video generation failed. Please try again.', 'error');
            } finally {
                overlay.classList.remove('active');
                appState.isGenerating = false;
                
                // Re-enable generate button
                generateBtn.disabled = false;
                generateBtn.innerHTML = '<i class="fas fa-magic"></i> Generate Video';
            }
        }

        function updateGenerationProgress(stage, progress) {
            document.getElementById('generationStatus').textContent = stage;
            document.getElementById('progressBar').style.width = progress + '%';
            
            appState.generationProgress = {
                stage: stage,
                progress: progress,
                estimatedTime: 0
            };
        }

        function showGeneratedVideo() {
            const section = document.getElementById('videoSection');
            const player = document.getElementById('videoPlayer');
            const watermark = document.getElementById('videoWatermark');
            
            player.src = currentGeneration.videoUrl;
            player.poster = currentGeneration.thumbnail;
            
            // Show/hide watermark based on user status
            if (currentGeneration.hasWatermark) {
                watermark.style.display = 'block';
            } else {
                watermark.style.display = 'none';
            }
            
            section.classList.add('active');
            section.scrollIntoView({ behavior: 'smooth' });
        }

        function regenerateVideo() {
            if (!userData.isPremium && userData.trialsRemaining <= 0) {
                showNotification('No regenerations remaining. Subscribe to Premium for unlimited tries!', 'warning');
                showPremiumModal();
                return;
            }
            
            generateVideoWithAI();
        }

        // ===== DOWNLOAD FUNCTIONALITY =====
        function showDownloadModal() {
            if (!currentGeneration.videoUrl) {
                showNotification('No video to download. Generate a video first.', 'error');
                return;
            }
            
            // Update downloads remaining display
            const remaining = Math.max(0, 3 - userData.dailyDownloads);
            document.getElementById('downloadsRemaining').textContent = `Downloads remaining today: ${remaining}`;
            
            document.getElementById('downloadModal').classList.add('active');
        }

        async function downloadVideo(type) {
            if (type === 'premium' && !userData.isPremium) {
                showNotification('Premium subscription required for high-quality downloads', 'warning');
                showPremiumModal();
                return;
            }
            
            // Check daily download limit for free users
            if (!userData.isPremium && userData.dailyDownloads >= 3) {
                showNotification('Daily download limit reached (3/3). Subscribe to Premium for unlimited downloads.', 'warning');
                showPremiumModal();
                return;
            }
            
            closeModal('downloadModal');
            
            if (type === 'free') {
                // Show ad first for free users
                showAdModal(() => {
                    performDownload('1080p HD with SmileX watermark');
                });
            } else {
                performDownload('4K Ultra HD');
            }
        }

        function showAdModal(callback) {
            const modal = document.getElementById('adModal');
            const countdown = document.getElementById('adCountdown');
            const progressBar = document.getElementById('adProgressBar');
            
            modal.classList.add('active');
            
            let timeLeft = 30;
            countdown.textContent = timeLeft;
            progressBar.style.width = '0%';
            
            const adInterval = setInterval(() => {
                timeLeft--;
                countdown.textContent = timeLeft;
                progressBar.style.width = `${((30 - timeLeft) / 30) * 100}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(adInterval);
                    modal.classList.remove('active');
                    showNotification('Advertisement completed! Starting download...', 'success');
                    callback();
                }
            }, 1000);
        }

        async function performDownload(quality) {
            try {
                appState.isDownloading = true;
                showNotification(`Preparing ${quality} download...`, 'info');
                
                // Simulate download processing with Python integration
                const downloadResult = await PythonVideoProcessor.processVideo(
                    { url: currentGeneration.videoUrl, startTime: Date.now() },
                    { 
                        addWatermark: quality.includes('watermark'),
                        quality: quality.includes('4K') ? '4K' : '1080p'
                    }
                );
                
                if (downloadResult.success) {
                    // Create download link
                    const link = document.createElement('a');
                    link.href = currentGeneration.videoUrl;
                    link.download = `smileX-${currentGeneration.style}-${Date.now()}.mp4`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Update download count for free users
                    if (!userData.isPremium) {
                        userData.dailyDownloads++;
                        saveUserData();
                    }
                    
                    showNotification(`Downloading ${quality} video... 📥`, 'success');
                } else {
                    throw new Error('Download processing failed');
                }
                
            } catch (error) {
                console.error('Download error:', error);
                showNotification('Download failed. Please try again.', 'error');
            } finally {
                appState.isDownloading = false;
            }
        }

        // ===== SHARING FUNCTIONALITY =====
        function shareVideo() {
            if (!currentGeneration.videoUrl) {
                showNotification('No video to share. Generate a video first.', 'error');
                return;
            }
            
            const shareData = {
                title: 'Check out my AI-generated video!',
                text: `I created this amazing video using SmileX AI: "${currentGeneration.prompt || currentGeneration.imagePrompt}"`,
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData).catch(console.error);
            } else {
                // Fallback to clipboard
                const shareText = `${shareData.text} ${shareData.url}`;
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('Share text copied to clipboard! 📋', 'success');
                }).catch(() => {
                    showNotification('Unable to share. Please copy the URL manually.', 'error');
                });
            }
        }

        function addToFavorites() {
            if (!currentGeneration.videoUrl) {
                showNotification('No video to add to favorites.', 'error');
                return;
            }
            
            const favorite = {
                id: currentGeneration.id,
                timestamp: new Date().toISOString(),
                videoData: { ...currentGeneration }
            };
            
            userData.favorites.push(favorite);
            saveUserData();
            
            showNotification('Video added to favorites! ❤️', 'success');
        }

        // ===== PREMIUM FUNCTIONALITY =====
        function subscribeToPremium() {
            showNotification('Redirecting to secure payment...', 'info');
            
            // Simulate payment process
            setTimeout(() => {
                userData.isPremium = true;
                userData.isSubscribed = true;
                userData.subscriptionDate = new Date().toISOString();
                userData.subscriptionId = 'sub_' + Math.random().toString(36).substr(2, 9);
                userData.trialsRemaining = Number.POSITIVE_INFINITY;
                userData.dailyDownloads = 0;
                
                saveUserData();
                updateUI();
                closeModal('premiumModal');
                
                showNotification('Welcome to SmileX Premium! You now have unlimited access to all features. 👑', 'success');
            }, 2000);
        }

        function showPremiumModal() {
            document.getElementById('premiumModal').classList.add('active');
        }

        // ===== HISTORY FUNCTIONALITY =====
        function toggleHistory() {
            const modal = document.getElementById('historyModal');
            const content = document.getElementById('historyContent');
            
            if (userData.generationHistory.length === 0) {
                content.innerHTML = `
                    <div class="text-center" style="padding: 3rem; color: var(--text-muted);">
                        <i class="fas fa-video" style="font-size: 4rem; opacity: 0.3; margin-bottom: 1rem;"></i>
                        <h3>No videos generated yet</h3>
                        <p>Start creating amazing videos with AI!</p>
                    </div>
                `;
            } else {
                content.innerHTML = `
                    <div class="history-grid">
                        ${userData.generationHistory.map(video => `
                            <div class="history-item" onclick="loadHistoryVideo('${video.id}')">
                                <div class="history-thumbnail">
                                    <i class="fas fa-play" style="font-size: 2rem;"></i>
                                </div>
                                <div class="history-title">${video.prompt || video.imagePrompt}</div>
                                <div class="history-meta">
                                    <span>${video.style} • ${video.duration}s</span>
                                    <span>${new Date(video.timestamp).toLocaleDateString()}</span>
                                </div>
                                <div class="history-tags">
                                    <span class="history-tag">${video.style}</span>
                                    <span class="history-tag">${video.duration}s</span>
                                    <span class="history-tag">${video.quality}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            modal.classList.add('active');
        }

        function loadHistoryVideo(videoId) {
            const video = userData.generationHistory.find(v => v.id === videoId);
            if (video) {
                currentGeneration = { ...video };
                showGeneratedVideo();
                closeModal('historyModal');
                showNotification('Video loaded from history', 'success');
            }
        }

        // ===== UI UPDATES =====
        function updateUI() {
            updateTrialsDisplay();
            updatePremiumButton();
            updateQualityOptions();
            updateAdVisibility();
        }

        function updateTrialsDisplay() {
            const statusEl = document.getElementById('userStatus');
            const trialsEl = document.getElementById('videoInfoText');
            const trialsInfo = document.getElementById('trialsInfo');
            
            if (userData.isPremium) {
                const premiumText = '✨ Premium: Unlimited generations';
                if (statusEl) statusEl.textContent = premiumText;
                if (trialsEl) trialsEl.textContent = premiumText;
                if (trialsInfo) trialsInfo.textContent = 'Premium users have unlimited access';
            } else {
                const remaining = userData.trialsRemaining;
                const freeText = `Free: ${remaining} generation${remaining !== 1 ? 's' : ''} remaining`;
                if (statusEl) statusEl.textContent = freeText;
                if (trialsEl) trialsEl.textContent = freeText;
                if (trialsInfo) trialsInfo.textContent = 'Free users get 3 daily generations';
            }
        }

        function updatePremiumButton() {
            const btn = document.getElementById('premiumBtn');
            const btnText = document.getElementById('premiumBtnText');
            
            if (userData.isSubscribed) {
                btn.style.background = 'var(--success-gradient)';
                btnText.innerHTML = '<i class="fas fa-crown"></i> Premium Active';
                btn.onclick = () => showNotification('You are already subscribed to Premium! 👑', 'success');
            } else {
                btn.style.background = 'var(--premium-gradient)';
                btnText.innerHTML = '<i class="fas fa-crown"></i> Go Premium';
                btn.onclick = () => showPremiumModal();
            }
        }

        function updateQualityOptions() {
            const qualityDisplay = document.getElementById('qualityDisplay');
            const durationSelect = document.getElementById('videoDuration');
            
            if (userData.isPremium) {
                qualityDisplay.textContent = '4K Ultra HD (Premium)';
                
                // Enable premium duration options
                Array.from(durationSelect.options).forEach(option => {
                    option.disabled = false;
                    if (option.classList.contains('premium-option')) {
                        option.textContent = option.textContent.replace(' (Premium)', '');
                    }
                });
            } else {
                qualityDisplay.textContent = '1080p HD (Free)';
                
                // Disable premium duration options
                Array.from(durationSelect.options).forEach(option => {
                    if (option.classList.contains('premium-option')) {
                        option.disabled = true;
                        if (!option.textContent.includes('(Premium)')) {
                            option.textContent += ' (Premium)';
                        }
                    }
                });
                
                // Reset to free option if premium option is selected
                if (durationSelect.value > 30) {
                    durationSelect.value = '30';
                }
            }
        }

        function updateAdVisibility() {
            const adContainer = document.getElementById('adContainer');
            if (userData.isPremium) {
                adContainer.style.display = 'none';
            } else {
                adContainer.style.display = 'flex';
            }
        }

        // ===== MODAL MANAGEMENT =====
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // ===== NOTIFICATION SYSTEM =====
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            
            // Clear any existing timeout
            if (notification.timeout) {
                clearTimeout(notification.timeout);
            }
            
            notification.innerHTML = message;
            notification.className = `notification ${type} show`;
            
            // Auto-hide after 5 seconds
            notification.timeout = setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // ===== GOOGLE ADS INTEGRATION =====
        function initializeGoogleAds() {
            if (CONFIG.GOOGLE_ADS_CLIENT !== 'ca-pub-XXXXXXXXXX') {
                try {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                } catch (error) {
                    console.error('Google Ads initialization error:', error);
                }
            }
        }

        // ===== UTILITY FUNCTIONS =====
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function formatFileSize(bytes) {
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            if (bytes === 0) return '0 Bytes';
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
        }

        function generateUniqueId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        // ===== ERROR HANDLING =====
        window.addEventListener('error', function(event) {
            console.error('Application error:', event.error);
            showNotification('An unexpected error occurred. Please refresh the page.', 'error');
        });

        window.addEventListener('unhandledrejection', function(event) {
            console.error('Unhandled promise rejection:', event.reason);
            showNotification('A network error occurred. Please check your connection.', 'error');
        });

        // ===== PERFORMANCE MONITORING =====
        window.addEventListener('load', () => {
            const loadTime = performance.now();
            console.log(`SmileX AI loaded in ${loadTime.toFixed(2)}ms`);
            
            // Initialize performance observer
            if ('PerformanceObserver' in window) {
                const observer = new PerformanceObserver((list) => {
                    for (const entry of list.getEntries()) {
                        if (entry.entryType === 'navigation') {
                            console.log(`Page load time: ${entry.loadEventEnd - entry.loadEventStart}ms`);
                        }
                    }
                });
                observer.observe({ entryTypes: ['navigation'] });
            }
        });

        // ===== KEYBOARD SHORTCUTS =====
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + Enter to generate
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                if (!appState.isGenerating) {
                    startGeneration();
                }
            }
            
            // Escape to close modals
            if (e.key === 'Escape') {
                const activeModal = document.querySelector('.modal.active');
                if (activeModal) {
                    activeModal.classList.remove('active');
                }
            }
            
            // Ctrl/Cmd + H for history
            if ((e.ctrlKey || e.metaKey) && e.key === 'h') {
                e.preventDefault();
                toggleHistory();
            }
        });

        // ===== ACCESSIBILITY ENHANCEMENTS =====
        function enhanceAccessibility() {
            // Add ARIA labels
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                if (!button.getAttribute('aria-label') && button.textContent) {
                    button.setAttribute('aria-label', button.textContent.trim());
                }
            });
            
            // Add focus indicators
            const focusableElements = document.querySelectorAll('button, input, textarea, select, [tabindex]');
            focusableElements.forEach(element => {
                element.addEventListener('focus', function() {
                    this.style.outline = '2px solid var(--neon-blue)';
                    this.style.outlineOffset = '2px';
                });
                
                element.addEventListener('blur', function() {
                    this.style.outline = '';
                    this.style.outlineOffset = '';
                });
            });
        }

        // Initialize accessibility enhancements
        document.addEventListener('DOMContentLoaded', enhanceAccessibility);

        // ===== ANALYTICS AND TRACKING =====
        function trackEvent(eventName, eventData = {}) {
            // Placeholder for analytics tracking
            console.log('Analytics Event:', eventName, eventData);
            
            // Example: Google Analytics 4
            if (typeof gtag !== 'undefined') {
                gtag('event', eventName, eventData);
            }
        }

        // Track user interactions
        function setupAnalytics() {
            // Track video generations
            const originalStartGeneration = startGeneration;
            startGeneration = function() {
                trackEvent('video_generation_started', {
                    style: document.getElementById('videoStyle').value,
                    duration: document.getElementById('videoDuration').value,
                    user_type: userData.isPremium ? 'premium' : 'free'
                });
                return originalStartGeneration.apply(this, arguments);
            };
            
            // Track downloads
            const originalDownloadVideo = downloadVideo;
            downloadVideo = function(type) {
                trackEvent('video_download_started', {
                    download_type: type,
                    user_type: userData.isPremium ? 'premium' : 'free'
                });
                return originalDownloadVideo.apply(this, arguments);
            };
        }

        // Initialize analytics
        document.addEventListener('DOMContentLoaded', setupAnalytics);

        // ===== FINAL INITIALIZATION =====
        console.log('SmileX AI Video Generator - Complete Edition Loaded');
        console.log('Features: AI Video Generation, Image Analysis, Premium Subscriptions, Watermarking, Google Ads Integration');
        console.log('Technologies: SMILEX OPERATIONS');
    </script>
</body>
</html>
