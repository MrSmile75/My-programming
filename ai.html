<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmileX - Advanced AI Video Generator Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --success-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --premium-gradient: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ff6b35 100%);
            --cyber-gradient: linear-gradient(135deg, #00d4ff 0%, #090979 50%, #020024 100%);
            --neon-blue: #00d4ff;
            --neon-purple: #b300ff;
            --neon-pink: #ff0080;
            --neon-green: #00ff88;
            --dark-bg: #0a0a0f;
            --darker-bg: #050508;
            --card-bg: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(255, 255, 255, 0.12);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
            --text-muted: rgba(255, 255, 255, 0.6);
            --border-color: rgba(255, 255, 255, 0.15);
            --shadow-light: 0 8px 32px rgba(31, 38, 135, 0.37);
            --shadow-heavy: 0 20px 60px rgba(0, 0, 0, 0.6);
            --shadow-neon: 0 0 20px rgba(0, 212, 255, 0.5);
            --border-radius: 16px;
            --border-radius-lg: 24px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Enhanced Animated Background with Parallax */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at center, var(--darker-bg) 0%, var(--dark-bg) 100%);
        }

        .parallax-layer {
            position: absolute;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
        }

        .bg-gradient {
            position: absolute;
            width: 200%;
            height: 200%;
            background: var(--cyber-gradient);
            opacity: 0.15;
            animation: rotate 30s linear infinite;
            border-radius: 50%;
        }

        .floating-shapes {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s ease-in-out infinite;
            filter: blur(1px);
        }

        .shape:nth-child(1) { 
            width: 120px; height: 120px; top: 10%; left: 5%; 
            background: var(--neon-blue); animation-delay: 0s; 
        }
        .shape:nth-child(2) { 
            width: 80px; height: 80px; top: 70%; left: 85%; 
            background: var(--neon-purple); animation-delay: 3s; 
        }
        .shape:nth-child(3) { 
            width: 100px; height: 100px; top: 30%; left: 80%; 
            background: var(--neon-pink); animation-delay: 6s; 
        }
        .shape:nth-child(4) { 
            width: 60px; height: 60px; top: 80%; left: 15%; 
            background: var(--neon-green); animation-delay: 9s; 
        }
        .shape:nth-child(5) { 
            width: 140px; height: 140px; top: 50%; left: 50%; 
            background: var(--accent-gradient); animation-delay: 12s; 
        }

        .grid-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
            25% { transform: translateY(-30px) translateX(20px) rotate(90deg); }
            50% { transform: translateY(20px) translateX(-15px) rotate(180deg); }
            75% { transform: translateY(-10px) translateX(25px) rotate(270deg); }
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Enhanced Glass Morphism */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-light);
        }

        .glass-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: var(--transition);
        }

        .glass-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-heavy), var(--shadow-neon);
            border-color: rgba(0, 212, 255, 0.3);
        }

        .glass-card:hover::before {
            left: 100%;
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            opacity: 0;
            transition: var(--transition);
        }

        .welcome-modal.active {
            display: flex;
            opacity: 1;
        }

        .welcome-content {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--neon-blue);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: var(--shadow-heavy), 0 0 50px rgba(0, 212, 255, 0.3);
            animation: welcomeSlide 0.8s ease;
        }

        @keyframes welcomeSlide {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .welcome-title {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 1rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-subtitle {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .name-input {
            width: 100%;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            transition: var(--transition);
        }

        .name-input:focus {
            outline: none;
            border-color: var(--neon-blue);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        /* Enhanced Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 1rem 0;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            font-weight: 900;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--accent-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.4);
            animation: logoGlow 3s ease-in-out infinite alternate;
        }

        @keyframes logoGlow {
            from { box-shadow: 0 0 20px rgba(79, 172, 254, 0.4); }
            to { box-shadow: 0 0 30px rgba(79, 172, 254, 0.8); }
        }

        .user-welcome {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            background: var(--premium-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--dark-bg);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link:hover {
            color: var(--text-primary);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-gradient);
            transition: var(--transition);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        /* Enhanced Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: var(--transition);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--accent-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.5);
        }

        .btn-secondary {
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            border-color: var(--neon-blue);
        }

        .btn-premium {
            background: var(--premium-gradient);
            color: var(--dark-bg);
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }

        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5);
        }

        .btn-premium.subscribed {
            background: var(--success-gradient);
            color: white;
        }

        /* Enhanced Hero Section */
        .hero-section {
            text-align: center;
            padding: 6rem 0;
            position: relative;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--glass-bg);
            border: 1px solid var(--neon-blue);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
            animation: badgePulse 3s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.2); }
            50% { box-shadow: 0 0 30px rgba(0, 212, 255, 0.4); }
        }

        .hero-title {
            font-family: 'Orbitron', monospace;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: var(--cyber-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
            animation: titleGlow 4s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            from { filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.6)); }
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 3rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 4rem;
            margin-top: 4rem;
        }

        .stat-item {
            text-align: center;
            position: relative;
        }

        .stat-number {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Enhanced Input Section */
        .input-section {
            margin: 6rem 0;
        }

        .input-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            box-shadow: var(--shadow-light);
            position: relative;
            overflow: hidden;
        }

        .input-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            animation: inputGlow 3s ease-in-out infinite alternate;
        }

        @keyframes inputGlow {
            from { opacity: 0.5; }
            to { opacity: 1; }
        }

        .input-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .input-title {
            font-family: 'Orbitron', monospace;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-description {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .input-container {
            position: relative;
            margin-bottom: 2rem;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            transition: var(--transition);
            overflow: hidden;
        }

        .input-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--accent-gradient);
            opacity: 0;
            transition: var(--transition);
        }

        .input-wrapper:focus-within {
            border-color: var(--neon-blue);
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        .input-wrapper:focus-within::before {
            opacity: 0.1;
        }

        .main-input {
            flex: 1;
            padding: 1.5rem 2rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 1.1rem;
            outline: none;
            position: relative;
            z-index: 1;
            font-family: inherit;
        }

        .main-input::placeholder {
            color: var(--text-muted);
        }

        .input-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-right: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .input-counter {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            padding: 0.25rem 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .generate-btn {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--border-radius);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.5);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .generate-btn .btn-text {
            transition: var(--transition);
        }

        .generate-btn.loading .btn-text {
            opacity: 0;
        }

        .generate-btn .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            opacity: 0;
            transition: var(--transition);
        }

        .generate-btn.loading .loading-spinner {
            opacity: 1;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Premium Subscription Section */
        .subscription-section {
            margin: 6rem 0;
            text-align: center;
        }

        .subscription-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--premium-gradient);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-heavy), 0 0 50px rgba(255, 215, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .subscription-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--premium-gradient);
            animation: premiumGlow 2s ease-in-out infinite alternate;
        }

        @keyframes premiumGlow {
            from { opacity: 0.7; }
            to { opacity: 1; }
        }

        .subscription-title {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            background: var(--premium-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subscription-price {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 2rem;
            background: var(--premium-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subscription-features {
            display: grid;
            gap: 1rem;
            text-align: left;
            margin-bottom: 3rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .feature-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .feature-icon {
            width: 24px;
            height: 24px;
            color: var(--neon-green);
            font-size: 1.2rem;
        }

        /* Enhanced Features Section */
        .features-section {
            margin: 8rem 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 5rem;
        }

        .section-title {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 1.5rem;
            background: var(--cyber-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2.5rem;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-gradient);
            transform: scaleX(0);
            transition: var(--transition);
        }

        .feature-card:hover::before {
            transform: scaleX(1);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-heavy), var(--shadow-neon);
            border-color: var(--neon-blue);
        }

        .feature-icon {
            width: 70px;
            height: 70px;
            background: var(--accent-gradient);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            margin-bottom: 2rem;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.4);
        }

        .feature-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .feature-description {
            color: var(--text-secondary);
            line-height: 1.7;
            font-size: 1rem;
        }

        /* Enhanced Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(15px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            transition: var(--transition);
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 2rem;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: var(--shadow-heavy);
            transform: scale(0.9);
            transition: var(--transition);
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            transform: rotate(90deg);
        }

        /* Premium Enforcement */
        .premium-lock {
            position: relative;
            opacity: 0.6;
            pointer-events: none;
        }

        .premium-lock::after {
            content: '🔒 Premium Required';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--premium-gradient);
            color: var(--dark-bg);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            font-weight: 700;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
        }

        /* Enhanced Generation Overlay */
        .generation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            transition: var(--transition);
        }

        .generation-overlay.active {
            display: flex;
            opacity: 1;
        }

        .generation-content {
            text-align: center;
            max-width: 700px;
            padding: 3rem;
        }

        .generation-spinner {
            width: 150px;
            height: 150px;
            margin: 0 auto 3rem;
            position: relative;
        }

        .spinner-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        .spinner-ring:nth-child(1) {
            border-top: 3px solid var(--neon-blue);
            animation-duration: 2s;
        }

        .spinner-ring:nth-child(2) {
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            border-top: 3px solid var(--neon-purple);
            animation-duration: 1.5s;
            animation-direction: reverse;
        }

        .spinner-ring:nth-child(3) {
            width: 60%;
            height: 60%;
            top: 20%;
            left: 20%;
            border-top: 3px solid var(--neon-pink);
            animation-duration: 1s;
        }

        .generation-status {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .generation-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .progress-bar {
            height: 100%;
            background: var(--accent-gradient);
            border-radius: 4px;
            transition: width 0.5s ease;
            width: 0%;
            box-shadow: 0 0 10px rgba(79, 172, 254, 0.5);
        }

        .generation-details {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-top: 2rem;
            border: 1px solid var(--border-color);
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .detail-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .detail-value {
            font-weight: 700;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Enhanced Video Section */
        .video-section {
            margin: 6rem 0;
            display: none;
        }

        .video-section.active {
            display: block;
            animation: fadeInUp 0.8s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .video-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            text-align: center;
            box-shadow: var(--shadow-heavy);
        }

        .video-player {
            width: 100%;
            max-width: 900px;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-light), 0 0 30px rgba(0, 212, 255, 0.2);
        }

        .video-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            font-size: 1rem;
        }

        .btn-refresh {
            background: var(--secondary-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .btn-download {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 4px 15px rgba(67, 233, 123, 0.3);
        }

        .btn-share {
            background: var(--glass-bg);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .action-btn:hover {
            transform: translateY(-3px);
        }

        .btn-refresh:hover {
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.5);
        }

        .btn-download:hover {
            box-shadow: 0 8px 25px rgba(67, 233, 123, 0.5);
        }

        .btn-share:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--neon-blue);
        }

        .trials-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        /* Enhanced History Section */
        .history-section {
            margin: 6rem 0;
            display: none;
        }

        .history-section.active {
            display: block;
            animation: fadeInUp 0.8s ease;
        }

        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .history-card {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
        }

        .history-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-heavy), var(--shadow-neon);
            border-color: var(--neon-blue);
        }

        .history-thumbnail {
            width: 100%;
            height: 180px;
            background: var(--glass-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: var(--text-muted);
            position: relative;
            overflow: hidden;
        }

        .history-thumbnail::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--accent-gradient);
            opacity: 0.1;
        }

        .history-info {
            padding: 1.5rem;
        }

        .history-title {
            font-weight: 700;
            margin-bottom: 0.75rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
        }

        .history-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .history-date {
            font-family: 'JetBrains Mono', monospace;
        }

        .history-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .history-tag {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Enhanced Ad Container */
        .ad-container {
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 3rem;
            text-align: center;
            margin: 3rem 0;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .ad-container:hover {
            border-color: rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.08);
        }

        .ad-placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        /* Enhanced Notifications */
        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--card-bg);
            backdrop-filter: blur(30px);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 1rem 1.5rem;
            color: var(--text-primary);
            box-shadow: var(--shadow-light);
            transform: translateX(100%);
            transition: var(--transition);
            z-index: 3000;
            max-width: 400px;
            min-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--neon-green);
            box-shadow: var(--shadow-light), 0 0 20px rgba(0, 255, 136, 0.2);
        }

        .notification.error {
            border-left: 4px solid var(--neon-pink);
            box-shadow: var(--shadow-light), 0 0 20px rgba(255, 0, 128, 0.2);
        }

        .notification.warning {
            border-left: 4px solid #fee140;
            box-shadow: var(--shadow-light), 0 0 20px rgba(254, 225, 64, 0.2);
        }

        .notification.info {
            border-left: 4px solid var(--neon-blue);
            box-shadow: var(--shadow-light), 0 0 20px rgba(0, 212, 255, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .nav-menu {
                display: none;
            }
            
            .hero-stats {
                gap: 2rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .hero-title {
                font-size: 3rem;
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
            }
            
            .main-container {
                padding: 0 1rem;
            }
            
            .hero-section {
                padding: 3rem 0;
            }
            
            .hero-stats {
                flex-direction: column;
                gap: 2rem;
            }
            
            .input-card {
                padding: 2rem 1rem;
            }
            
            .modal-content {
                margin: 1rem;
                padding: 1.5rem;
            }
            
            .video-actions {
                flex-direction: column;
            }
            
            .history-grid {
                grid-template-columns: 1fr;
            }
            
            .welcome-content {
                padding: 2rem;
                margin: 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .input-wrapper {
                flex-direction: column;
                align-items: stretch;
            }
            
            .input-actions {
                padding: 1rem;
                border-top: 1px solid var(--border-color);
                justify-content: space-between;
            }
            
            .generate-btn {
                padding: 0.75rem 1.5rem;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-gradient);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-gradient);
        }

        /* Selection */
        ::selection {
            background: rgba(0, 212, 255, 0.3);
            color: var(--text-primary);
        }

        /* Focus styles */
        .btn:focus,
        .main-input:focus,
        .name-input:focus {
            outline: 2px solid rgba(0, 212, 255, 0.5);
            outline-offset: 2px;
        }

        /* Parallax scroll effect */
        .parallax-element {
            transform: translateZ(0);
            will-change: transform;
        }
    </style>
</head>
<body>
    <!-- Enhanced Animated Background with Parallax -->
    <div class="animated-bg">
        <div class="parallax-layer" data-speed="0.2">
            <div class="bg-gradient"></div>
        </div>
        <div class="parallax-layer" data-speed="0.5">
            <div class="floating-shapes">
                <div class="shape"></div>
                <div class="shape"></div>
                <div class="shape"></div>
                <div class="shape"></div>
                <div class="shape"></div>
            </div>
        </div>
        <div class="parallax-layer" data-speed="0.8">
            <div class="grid-overlay"></div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div class="welcome-modal" id="welcomeModal">
        <div class="welcome-content">
            <h2 class="welcome-title">Welcome to SmileX AI</h2>
            <p class="welcome-subtitle">Enter your name to personalize your experience</p>
            <input type="text" class="name-input" id="nameInput" placeholder="Your name..." maxlength="50">
            <button class="btn btn-primary" onclick="saveUserName()" style="width: 100%; padding: 1rem;">
                <i class="fas fa-rocket"></i>
                Get Started
            </button>
        </div>
    </div>

    <!-- Enhanced Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-video"></i>
                </div>
                SmileX AI Pro
            </div>
            
            <div class="user-welcome" id="userWelcome" style="display: none;">
                <span>Welcome back,</span>
                <div class="user-avatar" id="userAvatar"></div>
                <span id="userName"></span>
            </div>
            
            <nav class="nav-menu">
                <a href="#features" class="nav-link">Features</a>
                <a href="#pricing" class="nav-link">Pricing</a>
                <a href="#gallery" class="nav-link">Gallery</a>
                <a href="#support" class="nav-link">Support</a>
            </nav>
            
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="toggleHistory()">
                    <i class="fas fa-history"></i>
                    History
                </button>
                <button class="btn btn-premium" id="premiumBtn" onclick="showPremiumModal()">
                    <i class="fas fa-crown"></i>
                    <span id="premiumBtnText">Go Premium</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Enhanced Hero Section -->
        <section class="hero-section parallax-element">
            <div class="hero-badge">
                <i class="fas fa-sparkles"></i>
                Next-Generation AI Video Technology
            </div>
            
            <h1 class="hero-title">
                Create Cinematic<br>
                Videos with AI
            </h1>
            
            <p class="hero-subtitle">
                Transform your imagination into stunning, professional-quality videos using our revolutionary AI technology. No editing experience required - just describe your vision and watch it come to life.
            </p>
            
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number" data-count="2500000">0</div>
                    <div class="stat-label">Videos Generated</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-count="150000">0</div>
                    <div class="stat-label">Active Creators</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" data-count="4.9">0</div>
                    <div class="stat-label">User Rating</div>
                </div>
            </div>
        </section>

        <!-- Enhanced Input Section -->
        <section class="input-section parallax-element">
            <div class="input-card glass-card">
                <div class="input-header">
                    <h2 class="input-title">Describe Your Vision</h2>
                    <p class="input-description">Tell our AI what you want to create and watch the magic happen</p>
                </div>
                
                <div class="input-container">
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            class="main-input" 
                            id="videoPrompt" 
                            placeholder="A majestic dragon soaring through a mystical forest at golden hour, with magical particles floating in the air..."
                            maxlength="500"
                        >
                        <div class="input-actions">
                            <span class="input-counter" id="charCounter">0/500</span>
                            <button class="generate-btn" id="generateBtn" onclick="startGeneration()">
                                <span class="btn-text">
                                    <i class="fas fa-magic"></i>
                                    Generate Video
                                </span>
                                <div class="loading-spinner"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Premium Subscription Section -->
        <section class="subscription-section parallax-element" id="pricing">
            <div class="subscription-card">
                <h2 class="subscription-title">
                    <i class="fas fa-crown"></i>
                    SmileX Premium
                </h2>
                <div class="subscription-price">$9.99<span style="font-size: 1rem; opacity: 0.7;">/month</span></div>
                
                <div class="subscription-features">
                    <div class="feature-item">
                        <i class="fas fa-infinity feature-icon"></i>
                        <span>Unlimited video generations</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-clock feature-icon"></i>
                        <span>Extended video lengths (up to 2 minutes)</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-gem feature-icon"></i>
                        <span>4K Ultra HD quality downloads</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-shield-alt feature-icon"></i>
                        <span>No watermarks or branding</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-ad feature-icon"></i>
                        <span>Completely ad-free experience</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-rocket feature-icon"></i>
                        <span>Priority processing queue</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-brain feature-icon"></i>
                        <span>Access to advanced AI models</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-headset feature-icon"></i>
                        <span>24/7 premium support</span>
                    </div>
                </div>
                
                <button class="btn btn-premium" onclick="subscribeToPremium()" style="width: 100%; padding: 1.5rem; font-size: 1.2rem;">
                    <i class="fas fa-crown"></i>
                    Subscribe to Premium
                </button>
                
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 1rem;">
                    Cancel anytime • 30-day money-back guarantee • Secure payment
                </p>
            </div>
        </section>

        <!-- Ad Container for Non-Premium Users -->
        <div class="ad-container" id="adContainer">
            <div class="ad-placeholder">
                <i class="fas fa-ad" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                <h3>Advertisement Space</h3>
                <p>Your Google Ads code goes here</p>
                <small>This ad will be hidden for Premium subscribers</small>
                <!-- INSERT YOUR GOOGLE ADS CODE BELOW -->
                <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> -->
            </div>
        </div>

        <!-- Enhanced Features Section -->
        <section class="features-section parallax-element" id="features">
            <div class="section-header">
                <h2 class="section-title">Revolutionary AI Features</h2>
                <p class="section-subtitle">
                    Experience the cutting-edge technology that makes SmileX the most advanced AI video generator in the world
                </p>
            </div>
            
            <div class="features-grid">
                <div class="feature-card glass-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3 class="feature-title">Advanced AI Understanding</h3>
                    <p class="feature-description">
                        Our neural networks understand context, emotions, lighting, and cinematography to create videos that perfectly match your vision with unprecedented accuracy.
                    </p>
                </div>
                
                <div class="feature-card glass-card">
                    <div class="feature-icon">
                        <i class="fas fa-palette"></i>
                    </div>
                    <h3 class="feature-title">Multiple Visual Styles</h3>
                    <p class="feature-description">
                        Choose from photorealistic, animated, cinematic, artistic, or custom styles. Each optimized for different use cases and creative preferences.
                    </p>
                </div>
                
                <div class="feature-card glass-card">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3 class="feature-title">Flexible Duration Options</h3>
                    <p class="feature-description">
                        Create videos from quick 15-second clips to full 2-minute productions. Perfect for social media, presentations, or detailed storytelling.
                    </p>
                </div>
                
                <div class="feature-card glass-card">
                    <div class="feature-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <h3 class="feature-title">Premium Quality Export</h3>
                    <p class="feature-description">
                        Download in multiple formats and resolutions up to 4K Ultra HD. Premium users get watermark-free exports with full commercial rights.
                    </p>
                </div>
                
                <div class="feature-card glass-card">
                    <div class="feature-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3 class="feature-title">Smart History Management</h3>
                    <p class="feature-description">
                        Comprehensive history tracking with search, filtering, and organization features. Never lose track of your creative projects.
                    </p>
                </div>
                
                <div class="feature-card glass-card">
                    <div class="feature-icon">
                        <i class="fas fa-share-alt"></i>
                    </div>
                    <h3 class="feature-title">Seamless Sharing</h3>
                    <p class="feature-description">
                        Direct integration with social media platforms, cloud storage, and collaboration tools. Share your creations instantly.
                    </p>
                </div>
            </div>
        </section>

        <!-- Enhanced Video Section -->
        <section class="video-section" id="videoSection">
            <div class="video-card glass-card">
                <h2 style="margin-bottom: 2rem; text-align: center; font-family: 'Orbitron', monospace; background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Your AI-Generated Masterpiece
                </h2>
                
                <video class="video-player" id="videoPlayer" controls>
                    <source src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                
                <div class="video-actions">
                    <button class="action-btn btn-refresh" onclick="refreshVideo()">
                        <i class="fas fa-redo"></i>
                        Regenerate
                    </button>
                    <button class="action-btn btn-download" onclick="showDownloadModal()">
                        <i class="fas fa-download"></i>
                        Download
                    </button>
                    <button class="action-btn btn-share" onclick="shareVideo()">
                        <i class="fas fa-share"></i>
                        Share
                    </button>
                </div>
                
                <div class="trials-info" id="trialsInfo">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                        <i class="fas fa-info-circle"></i>
                        <span id="trialsText">Free users: 3 regenerations remaining</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enhanced History Section -->
        <section class="history-section" id="historySection">
            <div class="section-header">
                <h2 class="section-title">Generation History</h2>
                <p class="section-subtitle">
                    Browse through your previously generated videos and manage your creative library
                </p>
            </div>
            
            <div class="history-grid" id="historyGrid">
                <!-- History items will be populated here -->
            </div>
        </section>
    </div>

    <!-- Analysis Modal -->
    <div class="modal" id="analysisModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 class="modal-title">AI Video Analysis</h2>
                <button class="modal-close" onclick="closeModal('analysisModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="chat-container" id="chatContainer">
                <!-- Chat messages will be populated here -->
            </div>
        </div>
    </div>

    <!-- Generation Overlay -->
    <div class="generation-overlay" id="generationOverlay">
        <div class="generation-content">
            <div class="generation-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            
            <div class="generation-status" id="generationStatus">
                Initializing AI Engine...
            </div>
            
            <div class="generation-progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="generation-details">
                <div class="detail-row">
                    <span class="detail-label">Prompt:</span>
                    <span class="detail-value" id="promptDisplay">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Style:</span>
                    <span class="detail-value" id="styleDisplay">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Duration:</span>
                    <span class="detail-value" id="durationDisplay">-</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Quality:</span>
                    <span class="detail-value" id="qualityDisplay">-</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Download Modal -->
    <div class="modal" id="downloadModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">Download Options</h2>
                <button class="modal-close" onclick="closeModal('downloadModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div style="display: grid; gap: 1.5rem;">
                <div class="option-card" id="premiumDownload" onclick="downloadVideo('premium')" style="padding: 2rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div class="feature-icon" style="width: 50px; height: 50px; font-size: 1.2rem; background: var(--premium-gradient);">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div>
                            <div class="option-title" style="font-size: 1.3rem;">Premium Download</div>
                            <div class="option-subtitle">Ultimate quality and features</div>
                        </div>
                    </div>
                    <div style="font-size: 1rem; color: var(--text-secondary); line-height: 1.6;">
                        ✓ 4K Ultra HD Quality (3840x2160)<br>
                        ✓ No Watermarks or Branding<br>
                        ✓ No Advertisements<br>
                        ✓ Instant Download<br>
                        ✓ Commercial Usage Rights<br>
                        ✓ Multiple Format Options
                    </div>
                </div>
                
                <div class="option-card" onclick="downloadVideo('free')" style="padding: 2rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <div class="feature-icon" style="width: 50px; height: 50px; font-size: 1.2rem; background: var(--success-gradient);">
                            <i class="fas fa-download"></i>
                        </div>
                        <div>
                            <div class="option-title" style="font-size: 1.3rem;">Free Download</div>
                            <div class="option-subtitle">Standard quality with limitations</div>
                        </div>
                    </div>
                    <div style="font-size: 1rem; color: var(--text-secondary); line-height: 1.6;">
                        ✓ 1080p HD Quality (1920x1080)<br>
                        ✓ SmileX Watermark Included<br>
                        ✓ Watch 30-second Ad First<br>
                        ✓ Limited Downloads per Day (3)<br>
                        ✓ Personal Use Only<br>
                        ✓ MP4 Format Only
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Premium Modal -->
    <div class="modal" id="premiumModal">
        <div class="modal-content" style="max-width: 700px; text-align: center;">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-crown" style="color: #ffd700;"></i>
                    SmileX Premium Subscription
                </h2>
                <button class="modal-close" onclick="closeModal('premiumModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div style="padding: 2rem 0;">
                <div style="font-size: 3.5rem; font-weight: 900; margin-bottom: 0.5rem; background: var(--premium-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    $9.99<span style="font-size: 1.2rem; color: var(--text-secondary);">/month</span>
                </div>
                
                <p style="color: var(--text-secondary); margin-bottom: 3rem; font-size: 1.1rem;">
                    Unlock unlimited creativity with our premium subscription
                </p>
                
                <div style="display: grid; gap: 1rem; text-align: left; margin-bottom: 3rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-infinity" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>Unlimited video generations per month</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-clock" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>Extended video lengths (60s & 120s)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-gem" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>4K Ultra HD quality downloads</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-shield-alt" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>No watermarks or branding</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-ad" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>Completely ad-free experience</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-rocket" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>Priority processing queue</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-brain" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>Access to advanced AI models</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius);">
                        <i class="fas fa-headset" style="color: var(--neon-green); font-size: 1.2rem;"></i>
                        <span>24/7 premium support</span>
                    </div>
                </div>
                
                <button class="btn btn-premium" onclick="subscribeToPremium()" style="width: 100%; padding: 1.5rem; font-size: 1.2rem; margin-bottom: 1rem;">
                    <i class="fas fa-crown"></i>
                    Subscribe to Premium Now
                </button>
                
                <p style="font-size: 0.9rem; color: var(--text-muted);">
                    Cancel anytime • 30-day money-back guarantee • Secure payment processing
                </p>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // Configuration
        const OPENAI_API_KEY = 'your-openai-api-key-here'; // Replace with your actual API key
        const OPENAI_API_URL = 'https://api.openai.com/v1/chat/completions';
        
        // User data
        let userData = {
            name: '',
            isPremium: false,
            isSubscribed: false,
            trialsRemaining: 3,
            generationHistory: [],
            dailyDownloads: 0,
            lastDownloadDate: null,
            subscriptionDate: null,
            subscriptionId: null
        };

        // Current generation data
        let currentGeneration = {
            prompt: '',
            style: '',
            duration: 15,
            quality: 'standard',
            videoUrl: ''
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            setupEventListeners();
            setupParallax();
            animateStats();
            checkUserWelcome();
            loadHistory();
            updateUI();
        });

        // Check if user needs welcome
        function checkUserWelcome() {
            if (!userData.name) {
                setTimeout(() => {
                    document.getElementById('welcomeModal').classList.add('active');
                }, 1000);
            } else {
                showUserWelcome();
            }
        }

        // Save user name
        function saveUserName() {
            const nameInput = document.getElementById('nameInput');
            const name = nameInput.value.trim();
            
            if (!name) {
                showNotification('Please enter your name', 'error');
                return;
            }
            
            if (name.length < 2) {
                showNotification('Name must be at least 2 characters long', 'error');
                return;
            }
            
            userData.name = name;
            saveUserData();
            
            document.getElementById('welcomeModal').classList.remove('active');
            showUserWelcome();
            showNotification(`Welcome to SmileX AI, ${name}! 🎉`, 'success');
        }

        // Show user welcome
        function showUserWelcome() {
            const welcomeEl = document.getElementById('userWelcome');
            const userNameEl = document.getElementById('userName');
            const userAvatarEl = document.getElementById('userAvatar');
            
            if (userData.name) {
                userNameEl.textContent = userData.name;
                userAvatarEl.textContent = userData.name.charAt(0).toUpperCase();
                welcomeEl.style.display = 'flex';
            }
        }

        // Setup parallax effects
        function setupParallax() {
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const parallaxElements = document.querySelectorAll('.parallax-layer');
                
                parallaxElements.forEach(element => {
                    const speed = element.dataset.speed || 0.5;
                    const yPos = -(scrolled * speed);
                    element.style.transform = `translateY(${yPos}px)`;
                });
            });
        }

        // Animate statistics
        function animateStats() {
            const statNumbers = document.querySelectorAll('.stat-number');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const target = parseInt(entry.target.dataset.count);
                        animateNumber(entry.target, target);
                        observer.unobserve(entry.target);
                    }
                });
            });
            
            statNumbers.forEach(stat => observer.observe(stat));
        }

        // Animate number counting
        function animateNumber(element, target) {
            let current = 0;
            const increment = target / 100;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                
                if (target === 4.9) {
                    element.textContent = current.toFixed(1) + '★';
                } else if (target >= 1000000) {
                    element.textContent = (current / 1000000).toFixed(1) + 'M+';
                } else if (target >= 1000) {
                    element.textContent = (current / 1000).toFixed(0) + 'K+';
                } else {
                    element.textContent = Math.floor(current);
                }
            }, 20);
        }

        // Setup event listeners
        function setupEventListeners() {
            const input = document.getElementById('videoPrompt');
            const counter = document.getElementById('charCounter');
            const nameInput = document.getElementById('nameInput');
            
            // Character counter
            input.addEventListener('input', function() {
                const length = this.value.length;
                counter.textContent = `${length}/500`;
                
                if (length > 450) {
                    counter.style.color = '#fa709a';
                } else if (length > 350) {
                    counter.style.color = '#fee140';
                } else {
                    counter.style.color = 'var(--text-muted)';
                }
            });
            
            // Enter key to generate
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    startGeneration();
                }
            });
            
            // Name input enter key
            nameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    saveUserName();
                }
            });
            
            // Close modals on outside click
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
                if (e.target.classList.contains('welcome-modal')) {
                    // Don't allow closing welcome modal by clicking outside
                }
            });
            
            // Prevent right-click
            document.addEventListener('contextmenu', e => e.preventDefault());
        }

        // Load user data from localStorage
        function loadUserData() {
            const saved = localStorage.getItem('smileXUserData');
            if (saved) {
                userData = { ...userData, ...JSON.parse(saved) };
            }
            
            // Reset daily downloads if new day
            const today = new Date().toDateString();
            if (userData.lastDownloadDate !== today) {
                userData.dailyDownloads = 0;
                userData.lastDownloadDate = today;
                saveUserData();
            }
            
            // Check subscription status
            checkSubscriptionStatus();
        }

        // Save user data to localStorage
        function saveUserData() {
            localStorage.setItem('smileXUserData', JSON.stringify(userData));
        }

        // Check subscription status
        function checkSubscriptionStatus() {
            if (userData.subscriptionId && userData.subscriptionDate) {
                const subscriptionDate = new Date(userData.subscriptionDate);
                const now = new Date();
                const daysDiff = (now - subscriptionDate) / (1000 * 60 * 60 * 24);
                
                // Check if subscription is still valid (30 days)
                if (daysDiff <= 30) {
                    userData.isPremium = true;
                    userData.isSubscribed = true;
                } else {
                    userData.isPremium = false;
                    userData.isSubscribed = false;
                    userData.subscriptionId = null;
                    userData.subscriptionDate = null;
                    saveUserData();
                    showNotification('Your premium subscription has expired', 'warning');
                }
            }
        }

        // Update UI based on user status
        function updateUI() {
            updateTrialsDisplay();
            updatePremiumButton();
            
            // Hide ads for premium users
            if (userData.isPremium) {
                const adContainer = document.getElementById('adContainer');
                if (adContainer) {
                    adContainer.style.display = 'none';
                }
            }
            
            // Update premium download option
            const premiumDownload = document.getElementById('premiumDownload');
            if (premiumDownload && !userData.isPremium) {
                premiumDownload.classList.add('premium-lock');
            }
        }

        // Update premium button
        function updatePremiumButton() {
            const btn = document.getElementById('premiumBtn');
            const btnText = document.getElementById('premiumBtnText');
            
            if (userData.isSubscribed) {
                btn.classList.remove('btn-premium');
                btn.classList.add('btn-premium', 'subscribed');
                btnText.textContent = 'Premium Active';
                btn.onclick = () => showNotification('You are already subscribed to Premium! 👑', 'success');
            } else {
                btn.classList.remove('subscribed');
                btnText.textContent = 'Go Premium';
                btn.onclick = () => showPremiumModal();
            }
        }

        // Start video generation process
        async function startGeneration() {
            const prompt = document.getElementById('videoPrompt').value.trim();
            const btn = document.getElementById('generateBtn');
            
            if (!prompt) {
                showNotification('Please enter a description for your video', 'error');
                return;
            }

            if (prompt.length < 15) {
                showNotification('Please provide a more detailed description (at least 15 characters)', 'error');
                return;
            }

            // Check if user has trials remaining
            if (!userData.isPremium && userData.trialsRemaining <= 0) {
                showNotification('No generations remaining. Subscribe to Premium for unlimited access!', 'warning');
                showPremiumModal();
                return;
            }

            // Show loading state
            btn.classList.add('loading');
            btn.disabled = true;

            currentGeneration.prompt = prompt;
            
            try {
                await showAnalysisModal(prompt);
            } catch (error) {
                console.error('Error starting generation:', error);
                showNotification('Failed to start generation. Please try again.', 'error');
            } finally {
                btn.classList.remove('loading');
                btn.disabled = false;
            }
        }

        // Show analysis modal with AI interaction
        async function showAnalysisModal(prompt) {
            const modal = document.getElementById('analysisModal');
            const container = document.getElementById('chatContainer');
            
            modal.classList.add('active');
            container.innerHTML = '';
            
            // Add user message
            addChatMessage('user', userData.name || 'You', prompt);
            
            // Add typing indicator
            addTypingIndicator();
            
            // Simulate AI analysis
            setTimeout(async () => {
                removeTypingIndicator();
                
                const analysis = await analyzePrompt(prompt);
                addChatMessage('ai', 'SmileX AI', analysis);
                
                setTimeout(() => {
                    showStyleOptions();
                }, 1000);
            }, 2000);
        }

        // Add chat message
        function addChatMessage(type, name, message) {
            const container = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message';
            
            messageDiv.innerHTML = `
                <div class="chat-avatar">
                    ${type === 'ai' ? '<i class="fas fa-robot"></i>' : (userData.name ? userData.name.charAt(0).toUpperCase() : '<i class="fas fa-user"></i>')}
                </div>
                <div class="chat-content">
                    <div class="chat-name">${name}</div>
                    <div class="chat-text">${message}</div>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }

        // Add typing indicator
        function addTypingIndicator() {
            const container = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message typing-message';
            typingDiv.id = 'typingIndicator';
            
            typingDiv.innerHTML = `
                <div class="chat-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="chat-content">
                    <div class="chat-name">SmileX AI</div>
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;
        }

        // Remove typing indicator
        function removeTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // Analyze prompt using OpenAI API
        async function analyzePrompt(prompt) {
            try {
                const response = await fetch(OPENAI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${OPENAI_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are an AI video generation assistant. Analyze the user\'s video request and provide helpful insights about the visual style that would work best. Be enthusiastic, creative, and concise. Focus on cinematography, mood, and visual elements.'
                            },
                            {
                                role: 'user',
                                content: `Analyze this video request and suggest the best visual approach: "${prompt}"`
                            }
                        ],
                        max_tokens: 150,
                        temperature: 0.8
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    return data.choices[0].message.content;
                } else {
                    throw new Error('API request failed');
                }
            } catch (error) {
                console.error('Error calling OpenAI API:', error);
                return `I've analyzed your request: "${prompt}". This sounds like an incredible video concept! The visual elements you've described would work beautifully with our AI technology. Let's choose the perfect style to bring your vision to life.`;
            }
        }

        // Show style options
        function showStyleOptions() {
            const container = document.getElementById('chatContainer');
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'chat-message';
            
            optionsDiv.innerHTML = `
                <div class="chat-avatar">
                    <i class="fas fa-palette"></i>
                </div>
                <div class="chat-content">
                    <div class="chat-name">Style Selection</div>
                    <div class="chat-text">Choose the visual style that best matches your vision:</div>
                    
                    <div class="options-grid" style="margin-top: 1.5rem;">
                        <div class="option-card" onclick="selectStyle('realistic')">
                            <div class="option-icon">🎬</div>
                            <div class="option-title">Realistic</div>
                            <div class="option-subtitle">Photorealistic</div>
                        </div>
                        <div class="option-card" onclick="selectStyle('animated')">
                            <div class="option-icon">🎨</div>
                            <div class="option-title">Animated</div>
                            <div class="option-subtitle">Cartoon style</div>
                        </div>
                        <div class="option-card" onclick="selectStyle('cinematic')">
                            <div class="option-icon">🎭</div>
                            <div class="option-title">Cinematic</div>
                            <div class="option-subtitle">Movie quality</div>
                        </div>
                        <div class="option-card" onclick="selectStyle('artistic')">
                            <div class="option-icon">🖼️</div>
                            <div class="option-title">Artistic</div>
                            <div class="option-subtitle">Creative style</div>
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(optionsDiv);
            container.scrollTop = container.scrollHeight;
        }

        // Select video style
        function selectStyle(style) {
            currentGeneration.style = style;
            
            // Update UI
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.option-card').classList.add('selected');
            
            // Show duration options after a delay
            setTimeout(() => {
                showDurationOptions();
            }, 500);
        }

        // Show duration options
        function showDurationOptions() {
            const container = document.getElementById('chatContainer');
            const durationDiv = document.createElement('div');
            durationDiv.className = 'chat-message';
            
            durationDiv.innerHTML = `
                <div class="chat-avatar">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="chat-content">
                    <div class="chat-name">Duration Selection</div>
                    <div class="chat-text">How long should your video be?</div>
                    
                    <div class="options-grid" style="margin-top: 1.5rem;">
                        <div class="option-card" onclick="selectDuration(15)">
                            <div class="option-icon">⚡</div>
                            <div class="option-title">15 seconds</div>
                            <div class="option-subtitle">Free</div>
                        </div>
                        <div class="option-card" onclick="selectDuration(30)">
                            <div class="option-icon">🚀</div>
                            <div class="option-title">30 seconds</div>
                            <div class="option-subtitle">Free</div>
                        </div>
                        <div class="option-card ${!userData.isPremium ? 'premium-lock' : ''}" onclick="selectDuration(60)">
                            <div class="option-icon">💎</div>
                            <div class="option-title">60 seconds</div>
                            <div class="option-subtitle">Premium</div>
                            ${!userData.isPremium ? '<div class="premium-badge">👑</div>' : ''}
                        </div>
                        <div class="option-card ${!userData.isPremium ? 'premium-lock' : ''}" onclick="selectDuration(120)">
                            <div class="option-icon">🎯</div>
                            <div class="option-title">120 seconds</div>
                            <div class="option-subtitle">Premium</div>
                            ${!userData.isPremium ? '<div class="premium-badge">👑</div>' : ''}
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                        <button class="btn btn-secondary" onclick="closeModal('analysisModal')" style="flex: 1;">
                            <i class="fas fa-times"></i>
                            Cancel
                        </button>
                        <button class="btn btn-primary" onclick="confirmGeneration()" style="flex: 1;">
                            <i class="fas fa-magic"></i>
                            Generate Video
                        </button>
                    </div>
                </div>
            `;
            
            container.appendChild(durationDiv);
            container.scrollTop = container.scrollHeight;
        }

        // Select duration
        function selectDuration(duration) {
            if ((duration > 30) && !userData.isPremium) {
                showNotification('Premium subscription required for longer videos', 'warning');
                showPremiumModal();
                return;
            }
            
            currentGeneration.duration = duration;
            currentGeneration.quality = userData.isPremium ? '4K Ultra HD' : '1080p HD';
            
            // Update UI
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.option-card').classList.add('selected');
        }

        // Confirm generation
        function confirmGeneration() {
            if (!currentGeneration.style) {
                showNotification('Please select a video style', 'error');
                return;
            }
            
            if (!currentGeneration.duration) {
                currentGeneration.duration = 15;
            }
            
            closeModal('analysisModal');
            generateVideo();
        }

        // Generate video with enhanced progress simulation
        async function generateVideo() {
            const overlay = document.getElementById('generationOverlay');
            const status = document.getElementById('generationStatus');
            const progressBar = document.getElementById('progressBar');
            
            // Update display values
            document.getElementById('promptDisplay').textContent = currentGeneration.prompt.substring(0, 40) + '...';
            document.getElementById('styleDisplay').textContent = currentGeneration.style;
            document.getElementById('durationDisplay').textContent = currentGeneration.duration + 's';
            document.getElementById('qualityDisplay').textContent = currentGeneration.quality;
            
            // Show generation overlay
            overlay.classList.add('active');
            
            // Enhanced generation steps with realistic timing
            const steps = [
                { text: 'Initializing AI Engine...', progress: 5, delay: 1500 },
                { text: 'Analyzing your prompt...', progress: 15, delay: 2000 },
                { text: 'Processing visual elements...', progress: 30, delay: 3000 },
                { text: 'Generating keyframes...', progress: 45, delay: 4000 },
                { text: 'Creating transitions...', progress: 60, delay: 3500 },
                { text: 'Adding effects and lighting...', progress: 75, delay: 3000 },
                { text: 'Rendering in ' + currentGeneration.quality + '...', progress: 90, delay: 4000 },
                { text: 'Finalizing video...', progress: 98, delay: 2000 },
                { text: 'Video generated successfully!', progress: 100, delay: 1000 }
            ];
            
            for (let i = 0; i < steps.length; i++) {
                status.textContent = steps[i].text;
                progressBar.style.width = steps[i].progress + '%';
                await new Promise(resolve => setTimeout(resolve, steps[i].delay));
            }
            
            setTimeout(() => {
                overlay.classList.remove('active');
                showGeneratedVideo();
            }, 1500);
        }

        // Show generated video
        function showGeneratedVideo() {
            const section = document.getElementById('videoSection');
            const player = document.getElementById('videoPlayer');
            
            // For demo purposes, use a sample video
            // In production, this would be the actual generated video URL
            const sampleVideos = [
                'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
                'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4'
            ];
            
            currentGeneration.videoUrl = sampleVideos[Math.floor(Math.random() * sampleVideos.length)];
            player.src = currentGeneration.videoUrl;
            
            section.classList.add('active');
            section.scrollIntoView({ behavior: 'smooth' });
            
            // Add to history
            addToHistory(currentGeneration);
            
            // Update trials for non-premium users
            if (!userData.isPremium) {
                userData.trialsRemaining = Math.max(0, userData.trialsRemaining - 1);
                updateTrialsDisplay();
                saveUserData();
            }
            
            showNotification(`🎉 Video generated successfully! Quality: ${currentGeneration.quality}`, 'success');
        }

        // Refresh/regenerate video
        function refreshVideo() {
            if (!userData.isPremium && userData.trialsRemaining <= 0) {
                showNotification('No regenerations remaining. Subscribe to Premium for unlimited tries!', 'warning');
                showPremiumModal();
                return;
            }
            
            generateVideo();
        }

        // Show download modal
        function showDownloadModal() {
            if (!currentGeneration.videoUrl) {
                showNotification('No video to download. Generate a video first.', 'error');
                return;
            }
            
            const modal = document.getElementById('downloadModal');
            modal.classList.add('active');
        }

        // Download video with premium enforcement
        function downloadVideo(type) {
            if (type === 'premium' && !userData.isPremium) {
                showNotification('Premium subscription required for high-quality downloads', 'warning');
                showPremiumModal();
                return;
            }
            
            // Check daily download limit for free users
            if (!userData.isPremium && userData.dailyDownloads >= 3) {
                showNotification('Daily download limit reached (3/3). Subscribe to Premium for unlimited downloads.', 'warning');
                showPremiumModal();
                return;
            }
            
            closeModal('downloadModal');
            
            if (type === 'free') {
                // Show ad first for free users
                showAd(() => {
                    performDownload('1080p HD with watermark');
                });
            } else {
                performDownload('4K Ultra HD');
            }
        }

        // Show ad simulation with countdown
        function showAd(callback) {
            showNotification('Please wait for the advertisement to complete...', 'info');
            
            // Simulate 30-second ad with countdown
            let countdown = 30;
            const adInterval = setInterval(() => {
                countdown--;
                if (countdown <= 0) {
                    clearInterval(adInterval);
                    showNotification('Advertisement completed! Starting download...', 'success');
                    callback();
                } else {
                    showNotification(`Advertisement: ${countdown}s remaining... Please wait`, 'info');
                }
            }, 1000);
        }

        // Perform actual download
        function performDownload(quality) {
            // Simulate download
            const link = document.createElement('a');
            link.href = currentGeneration.videoUrl;
            link.download = `smileX-${currentGeneration.style}-${Date.now()}.mp4`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Update download count for free users
            if (!userData.isPremium) {
                userData.dailyDownloads++;
                saveUserData();
            }
            
            showNotification(`📥 Downloading ${quality} video...`, 'success');
        }

        // Share video
        function shareVideo() {
            if (!currentGeneration.videoUrl) {
                showNotification('No video to share. Generate a video first.', 'error');
                return;
            }
            
            const shareData = {
                title: 'Check out my AI-generated video!',
                text: `I created this amazing video using SmileX AI: "${currentGeneration.prompt}"`,
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData).catch(console.error);
            } else {
                // Fallback to clipboard
                navigator.clipboard.writeText(`${shareData.text} ${shareData.url}`).then(() => {
                    showNotification('Share text copied to clipboard!', 'success');
                }).catch(() => {
                    showNotification('Unable to share. Please copy the URL manually.', 'error');
                });
            }
        }

        // Subscribe to premium
        function subscribeToPremium() {
            // In a real implementation, this would integrate with a payment processor like Stripe
            // For demo purposes, we'll simulate a successful subscription
            
            showNotification('Redirecting to secure payment...', 'info');
            
            setTimeout(() => {
                // Simulate successful payment
                userData.isPremium = true;
                userData.isSubscribed = true;
                userData.subscriptionDate = new Date().toISOString();
                userData.subscriptionId = 'sub_' + Math.random().toString(36).substr(2, 9);
                userData.trialsRemaining = Infinity;
                userData.dailyDownloads = 0;
                
                saveUserData();
                updateUI();
                closeModal('premiumModal');
                
                showNotification('🎉 Welcome to SmileX Premium! You now have unlimited access to all features.', 'success');
            }, 2000);
        }

        // Show premium modal
        function showPremiumModal() {
            document.getElementById('premiumModal').classList.add('active');
        }

        // Add to history with enhanced metadata
        function addToHistory(generation) {
            const historyItem = {
                id: Date.now(),
                prompt: generation.prompt,
                style: generation.style,
                duration: generation.duration,
                quality: generation.quality,
                videoUrl: generation.videoUrl,
                timestamp: new Date().toISOString(),
                thumbnail: `https://via.placeholder.com/320x180/${Math.floor(Math.random()*16777215).toString(16)}/ffffff?text=${encodeURIComponent(generation.style)}`,
                tags: [generation.style, generation.duration + 's', generation.quality]
            };
            
            userData.generationHistory.unshift(historyItem);
            
            // Keep only last 100 items
            if (userData.generationHistory.length > 100) {
                userData.generationHistory = userData.generationHistory.slice(0, 100);
            }
            
            saveUserData();
            loadHistory();
        }

        // Load and display history with enhanced UI
        function loadHistory() {
            const grid = document.getElementById('historyGrid');
            
            if (userData.generationHistory.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; color: var(--text-muted);">
                        <i class="fas fa-video" style="font-size: 4rem; margin-bottom: 2rem; opacity: 0.3;"></i>
                        <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">No videos generated yet</h3>
                        <p style="font-size: 1.1rem;">Start creating amazing videos with AI!</p>
                        <button class="btn btn-primary" onclick="document.getElementById('videoPrompt').focus()" style="margin-top: 2rem;">
                            <i class="fas fa-magic"></i>
                            Create Your First Video
                        </button>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = userData.generationHistory.map(item => `
                <div class="history-card" onclick="playHistoryVideo('${item.id}')">
                    <div class="history-thumbnail">
                        <i class="fas fa-play"></i>
                    </div>
                    <div class="history-info">
                        <div class="history-title">${item.prompt}</div>
                        <div class="history-meta">
                            <span>${item.style} • ${item.duration}s</span>
                            <span class="history-date">${new Date(item.timestamp).toLocaleDateString()}</span>
                        </div>
                        <div class="history-tags">
                            ${item.tags.map(tag => `<span class="history-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Play history video
        function playHistoryVideo(id) {
            const item = userData.generationHistory.find(h => h.id == id);
            if (item) {
                currentGeneration = { ...item };
                const player = document.getElementById('videoPlayer');
                player.src = item.videoUrl;
                
                const section = document.getElementById('videoSection');
                section.classList.add('active');
                section.scrollIntoView({ behavior: 'smooth' });
                
                // Hide history
                document.getElementById('historySection').classList.remove('active');
                
                showNotification(`Playing: ${item.prompt.substring(0, 50)}...`, 'info');
            }
        }

        // Toggle history section
        function toggleHistory() {
            const section = document.getElementById('historySection');
            section.classList.toggle('active');
            
            if (section.classList.contains('active')) {
                section.scrollIntoView({ behavior: 'smooth' });
                loadHistory(); // Refresh history when opened
            }
        }

        // Update trials display with enhanced styling
        function updateTrialsDisplay() {
            const trialsText = document.getElementById('trialsText');
            if (userData.isPremium) {
                trialsText.innerHTML = '<i class="fas fa-crown" style="color: #ffd700;"></i> Premium: Unlimited generations';
                trialsText.style.color = '#ffd700';
            } else {
                const remaining = userData.trialsRemaining;
                trialsText.innerHTML = `<i class="fas fa-info-circle"></i> Free users: ${remaining} generation${remaining !== 1 ? 's' : ''} remaining`;
                
                if (remaining === 0) {
                    trialsText.style.color = '#fa709a';
                } else if (remaining === 1) {
                    trialsText.style.color = '#fee140';
                } else {
                    trialsText.style.color = 'var(--text-secondary)';
                }
            }
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Enhanced notification system
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            
            // Clear any existing timeout
            if (notification.timeout) {
                clearTimeout(notification.timeout);
            }
            
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            // Auto-hide after 5 seconds
            notification.timeout = setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        // Initialize character counter
        document.getElementById('videoPrompt').dispatchEvent(new Event('input'));
        
        // Add smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>