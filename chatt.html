<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmileX - Advanced Social Platform</title>
    <meta name="description" content="SmileX - A modern social platform for connecting communities and sharing experiences">
    <meta name="keywords" content="social media, communities, chat, posts, networking">
    
    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            /* Color Variables */
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --accent-color: #00b4db;
            --background-color: #000000;
            --surface-color: #1a1a1a;
            --surface-secondary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #666666;
            --border-color: #404040;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --premium-gold: #ffd700;
            --premium-gradient: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            
            /* Spacing Variables */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            
            /* Typography Variables */
            --font-primary: 'Orbitron', sans-serif;
            --font-secondary: 'Poppins', sans-serif;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 2rem;
            
            /* Border Radius Variables */
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-full: 9999px;
            
            /* Shadow Variables */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            
            /* Transition Variables */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-primary);
            background: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Accessibility Improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus Styles for Accessibility */
        *:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Skip Link for Screen Readers */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            text-decoration: none;
            border-radius: var(--radius-md);
            z-index: 10000;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* Preloader Styles */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: var(--transition-slow);
        }

        .preloader-logo {
            font-size: var(--font-size-3xl);
            margin-bottom: var(--spacing-md);
            animation: bounce 2s infinite;
        }

        .preloader-text {
            font-size: var(--font-size-2xl);
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-top: var(--spacing-xl);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-30px); }
            60% { transform: translateY(-15px); }
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Premium Animations */
        @keyframes disco {
            0% { color: #ff0000; text-shadow: 0 0 10px #ff0000; }
            16% { color: #ff8000; text-shadow: 0 0 10px #ff8000; }
            33% { color: #ffff00; text-shadow: 0 0 10px #ffff00; }
            50% { color: #00ff00; text-shadow: 0 0 10px #00ff00; }
            66% { color: #0080ff; text-shadow: 0 0 10px #0080ff; }
            83% { color: #8000ff; text-shadow: 0 0 10px #8000ff; }
            100% { color: #ff0080; text-shadow: 0 0 10px #ff0080; }
        }

        @keyframes premium-glow {
            0%, 100% { box-shadow: 0 0 20px var(--premium-gold); }
            50% { box-shadow: 0 0 40px var(--premium-gold), 0 0 60px var(--premium-gold); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes glow {
            from { text-shadow: 0 0 5px var(--warning-color); }
            to { text-shadow: 0 0 20px var(--warning-color), 0 0 30px var(--warning-color); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Premium Styles */
        .premium-user {
            position: relative;
        }

        .premium-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: var(--premium-gradient);
            color: #000;
            padding: 2px 6px;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: bold;
            animation: premium-glow 2s ease-in-out infinite;
        }

        .disco-text {
            animation: disco 2s linear infinite;
            font-weight: bold;
        }

        .premium-emoji {
            font-size: 1.2em;
            animation: float 2s ease-in-out infinite;
        }

        /* Modal Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Onboarding Modal */
        .onboarding-container {
            background: var(--surface-color);
            padding: var(--spacing-xl);
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            transform: scale(0.9);
            transition: var(--transition-normal);
        }

        .overlay.active .onboarding-container {
            transform: scale(1);
        }

        .onboarding-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .onboarding-header h2 {
            font-size: var(--font-size-2xl);
            margin-bottom: var(--spacing-sm);
            color: var(--primary-color);
        }

        /* Profile Picture Upload */
        .profile-upload-section {
            text-align: center;
            margin-bottom: var(--spacing-lg);
        }

        .profile-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto var(--spacing-md);
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-size-3xl);
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .profile-preview:hover {
            transform: scale(1.05);
        }

        .profile-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .profile-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: var(--transition-fast);
            border-radius: 50%;
        }

        .profile-preview:hover .profile-upload-overlay {
            opacity: 1;
        }

        .profile-upload-buttons {
            display: flex;
            gap: var(--spacing-sm);
            justify-content: center;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-control, .form-select {
            width: 100%;
            padding: 12px;
            background: var(--surface-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: var(--font-size-sm);
            transition: var(--transition-fast);
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(106, 17, 203, 0.2);
        }

        .form-control::placeholder {
            color: var(--text-muted);
        }

        .name-validation {
            margin-top: var(--spacing-xs);
            font-size: var(--font-size-xs);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .name-available {
            color: var(--success-color);
        }

        .name-taken {
            color: var(--error-color);
        }

        /* Consent Section */
        .consent-section {
            margin: var(--spacing-lg) 0;
            padding: var(--spacing-md);
            background: var(--surface-secondary);
            border-radius: var(--radius-md);
        }

        .consent-item {
            display: flex;
            align-items: center;
            margin: var(--spacing-sm) 0;
        }

        .consent-item input[type="checkbox"] {
            margin-right: var(--spacing-sm);
            width: 16px;
            height: 16px;
        }

        .consent-item label {
            cursor: pointer;
            user-select: none;
        }

        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-fast);
            text-decoration: none;
            gap: var(--spacing-xs);
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #5a0fb8;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--surface-secondary);
            color: var(--text-secondary);
        }

        .btn-secondary:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .btn-premium {
            background: var(--premium-gradient);
            color: #000;
            font-weight: bold;
            animation: premium-glow 2s ease-in-out infinite;
        }

        .btn:disabled {
            background: var(--border-color);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Navigation */
        nav {
            background: var(--background-color);
            box-shadow: var(--shadow-md);
            position: sticky;
            top: 0;
            z-index: 50;
            border-bottom: 1px solid var(--border-color);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 64px;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: var(--font-size-xl);
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo i {
            margin-right: var(--spacing-sm);
            font-size: var(--font-size-2xl);
        }

        .nav-search {
            position: relative;
            display: none;
        }

        @media (min-width: 768px) {
            .nav-search {
                display: block;
            }
        }

        .nav-search input {
            width: 300px;
            padding: 8px 12px 8px 40px;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            color: var(--text-primary);
            font-size: var(--font-size-sm);
        }

        .nav-search i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
            margin-top: 4px;
        }

        .search-result-item {
            padding: var(--spacing-sm) var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .search-result-item:hover {
            background: var(--surface-secondary);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-type {
            font-size: var(--font-size-xs);
            color: var(--text-muted);
            text-transform: uppercase;
            font-weight: bold;
        }

        .search-result-title {
            font-weight: 500;
            margin: var(--spacing-xs) 0;
        }

        .search-result-description {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .nav-button {
            padding: var(--spacing-sm);
            background: var(--surface-color);
            border: none;
            border-radius: 50%;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition-fast);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .nav-button:hover {
            background: var(--surface-secondary);
            color: var(--primary-color);
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--error-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: var(--font-size-sm);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .user-avatar.premium {
            border: 2px solid var(--premium-gold);
            animation: premium-glow 2s ease-in-out infinite;
        }

        /* Main Layout */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-lg) var(--spacing-md);
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-lg);
        }

        @media (min-width: 1024px) {
            .main-container {
                grid-template-columns: 250px 1fr 250px;
            }
        }

        /* Sidebar */
        .sidebar {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            height: fit-content;
            position: sticky;
            top: 80px;
            display: none;
        }

        @media (min-width: 1024px) {
            .sidebar {
                display: block;
            }
        }

        .sidebar h3 {
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-md);
            color: var(--primary-color);
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar li {
            margin-bottom: var(--spacing-sm);
        }

        .sidebar a {
            display: flex;
            align-items: center;
            padding: var(--spacing-sm);
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--radius-md);
            transition: var(--transition-fast);
        }

        .sidebar a:hover {
            background: var(--surface-secondary);
            color: var(--primary-color);
        }

        /* Community Icons */
        .community-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: var(--spacing-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: var(--font-size-xs);
            font-weight: bold;
        }

        /* Main Feed */
        .main-feed {
            min-height: 100vh;
        }

        /* Create Post Card */
        .create-post-card {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-md);
        }

        .create-post-input {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .create-post-input input {
            flex: 1;
            padding: 12px 16px;
            background: var(--surface-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            color: var(--text-primary);
            cursor: pointer;
        }

        .post-type-buttons {
            display: flex;
            gap: var(--spacing-sm);
        }

        .post-type-button {
            flex: 1;
            padding: var(--spacing-sm) var(--spacing-md);
            background: transparent;
            color: var(--text-secondary);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-fast);
            font-size: var(--font-size-sm);
        }

        .post-type-button:hover {
            background: var(--surface-secondary);
            color: var(--primary-color);
        }

        /* Sort Buttons */
        .sort-buttons {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            display: flex;
            gap: var(--spacing-sm);
            overflow-x: auto;
        }

        .sort-button {
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-full);
            border: none;
            font-size: var(--font-size-sm);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-fast);
            white-space: nowrap;
        }

        .sort-button.active {
            background: var(--primary-color);
            color: white;
        }

        .sort-button:not(.active) {
            background: var(--surface-secondary);
            color: var(--text-secondary);
        }

        .sort-button:not(.active):hover {
            background: var(--border-color);
        }

        /* Post Cards */
        .post-card {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
            animation: fadeIn 0.5s ease;
            cursor: pointer;
        }

        .post-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .post-content {
            padding: var(--spacing-lg);
            display: flex;
            gap: var(--spacing-md);
        }

        /* Vote Section */
        .vote-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .vote-button {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: var(--font-size-lg);
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .vote-button:hover {
            background: var(--surface-secondary);
        }

        .vote-button.voted-up {
            color: var(--primary-color);
        }

        .vote-button.voted-down {
            color: var(--secondary-color);
        }

        .vote-count {
            font-weight: bold;
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
        }

        /* Post Main Content */
        .post-main {
            flex: 1;
        }

        .post-meta {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: var(--font-size-xs);
            color: var(--text-muted);
            margin-bottom: var(--spacing-sm);
        }

        .post-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
            line-height: 1.4;
        }

        .post-text {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-md);
            line-height: 1.6;
        }

        .post-image, .post-video {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            cursor: pointer;
        }

        .media-grid {
            display: grid;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }

        .media-grid.single {
            grid-template-columns: 1fr;
        }

        .media-grid.double {
            grid-template-columns: 1fr 1fr;
        }

        .media-grid.multiple {
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        }

        /* Post Actions */
        .post-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .post-action-buttons {
            display: flex;
            gap: var(--spacing-md);
        }

        .post-action-button {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: var(--font-size-sm);
            cursor: pointer;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .post-action-button:hover {
            background: var(--surface-secondary);
            color: var(--primary-color);
        }

        /* Comments Section */
        .comments-section {
            border-top: 1px solid var(--border-color);
            padding: var(--spacing-md) var(--spacing-lg);
            display: none;
        }

        .comments-section.active {
            display: block;
        }

        .comment-input {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            align-items: center;
        }

        .comment-input input {
            flex: 1;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--surface-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            color: var(--text-primary);
        }

        .emoji-picker-btn {
            background: var(--surface-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: var(--spacing-sm);
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .emoji-picker-btn:hover {
            background: var(--border-color);
            color: var(--primary-color);
        }

        .emoji-picker {
            position: absolute;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            display: none;
            grid-template-columns: repeat(8, 1fr);
            gap: var(--spacing-xs);
            z-index: 100;
            max-width: 300px;
        }

        .emoji-picker.active {
            display: grid;
        }

        .emoji-item {
            padding: var(--spacing-xs);
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
            text-align: center;
        }

        .emoji-item:hover {
            background: var(--surface-secondary);
        }

        .comment {
            background: var(--surface-secondary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-sm);
            position: relative;
        }

        .comment.reply {
            margin-left: var(--spacing-xl);
            border-left: 2px solid var(--primary-color);
        }

        .comment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-xs);
        }

        .comment-author {
            font-weight: bold;
            color: var(--primary-color);
            font-size: var(--font-size-xs);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .comment-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        .comment-text {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-xs);
        }

        .comment-actions {
            display: flex;
            gap: var(--spacing-md);
            font-size: 11px;
        }

        .comment-action {
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .comment-action:hover {
            color: var(--primary-color);
        }

        /* Precise Timestamp */
        .precise-timestamp {
            font-size: 10px;
            color: var(--text-muted);
            font-family: monospace;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition-normal);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
        }

        .modal-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: var(--font-size-xl);
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: var(--font-size-lg);
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
        }

        .modal-close:hover {
            color: var(--text-primary);
            background: var(--surface-secondary);
        }

        .modal-body {
            padding: var(--spacing-lg);
        }

        .modal-footer {
            padding: var(--spacing-lg);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-sm);
        }

        /* Image/Video Upload Area */
        .media-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--spacing-xl);
            text-align: center;
            margin: var(--spacing-md) 0;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .media-upload-area:hover,
        .media-upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(106, 17, 203, 0.1);
        }

        .media-preview {
            max-width: 100%;
            max-height: 300px;
            border-radius: var(--radius-md);
            margin: var(--spacing-md) 0;
        }

        .media-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-sm);
            margin: var(--spacing-md) 0;
        }

        .media-preview-item {
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .media-preview-item img,
        .media-preview-item video {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .media-remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Chat Styles */
        .chat-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            font-size: var(--font-size-xl);
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: var(--transition-fast);
            z-index: 100;
        }

        .chat-toggle:hover {
            transform: scale(1.1);
        }

        .chat-container {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: var(--surface-color);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            display: flex;
            flex-direction: column;
            transform: translateY(100%);
            opacity: 0;
            transition: var(--transition-normal);
            z-index: 99;
            border: 1px solid var(--border-color);
        }

        .chat-container.active {
            transform: translateY(0);
            opacity: 1;
        }

        .chat-header {
            padding: var(--spacing-md);
            background: var(--primary-color);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            color: white;
            font-size: var(--font-size-base);
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: var(--font-size-lg);
            cursor: pointer;
            padding: var(--spacing-xs);
            border-radius: var(--radius-sm);
            transition: var(--transition-fast);
        }

        .chat-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .chat-messages {
            flex: 1;
            padding: var(--spacing-md);
            overflow-y: auto;
        }

        .message {
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--surface-secondary);
            border-radius: var(--radius-md);
        }

        .message.user {
            background: var(--primary-color);
            margin-left: var(--spacing-lg);
        }

        .message.agent {
            background: var(--surface-secondary);
            margin-right: var(--spacing-lg);
        }

        .message-user {
            font-weight: bold;
            color: var(--primary-color);
            font-size: var(--font-size-xs);
            margin-bottom: var(--spacing-xs);
        }

        .message.user .message-user {
            color: white;
        }

        .message-text {
            color: var(--text-secondary);
            font-size: var(--font-size-sm);
            margin-bottom: var(--spacing-xs);
        }

        .message.user .message-text {
            color: white;
        }

        .message-time {
            font-size: 11px;
            color: var(--text-muted);
        }

        .message.user .message-time {
            color: rgba(255, 255, 255, 0.7);
        }

        .chat-input-container {
            padding: var(--spacing-md);
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: var(--spacing-sm);
        }

        .chat-input {
            flex: 1;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--surface-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            color: var(--text-primary);
        }

        .chat-send {
            background: var(--primary-color);
            border: none;
            color: white;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .chat-send:hover {
            background: #5a0fb8;
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--surface-color);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 64px;
            z-index: 50;
        }

        @media (min-width: 1024px) {
            .mobile-nav {
                display: none;
            }
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            text-decoration: none;
            transition: var(--transition-fast);
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
        }

        .mobile-nav-item.active,
        .mobile-nav-item:hover {
            color: var(--primary-color);
        }

        .mobile-nav-item i {
            font-size: var(--font-size-lg);
            margin-bottom: var(--spacing-xs);
        }

        .mobile-nav-item span {
            font-size: 10px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            transform: translateX(100%);
            opacity: 0;
            transition: var(--transition-normal);
            z-index: 1001;
        }

        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }

        /* Poll Styles */
        .poll-container {
            background: var(--surface-secondary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .poll-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-sm) var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            background: var(--border-color);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .poll-option:hover {
            background: #505050;
        }

        .poll-option.voted {
            cursor: default;
        }

        .poll-option-bar {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            opacity: 0.3;
            transition: width 0.5s ease;
        }

        .poll-option-text,
        .poll-option-percentage {
            position: relative;
            z-index: 1;
        }

        .poll-option-percentage {
            font-size: var(--font-size-xs);
            color: var(--text-secondary);
        }

        .poll-stats {
            margin-top: var(--spacing-sm);
            font-size: 11px;
            color: var(--text-muted);
            text-align: center;
        }

        /* Community Colors */
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-red-500 { background-color: #ef4444; }
        .bg-green-500 { background-color: var(--success-color); }
        .bg-purple-500 { background-color: var(--primary-color); }
        .bg-gray-500 { background-color: #6b7280; }
        .bg-yellow-500 { background-color: var(--warning-color); }
        .bg-pink-500 { background-color: #ec4899; }
        .bg-indigo-500 { background-color: #6366f1; }

        /* Live Features */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: var(--error-color);
            font-size: var(--font-size-xs);
            font-weight: bold;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--error-color);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* Premium Features */
        .premium-section {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            margin-top: var(--spacing-xl);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .premium-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }

        .premium-content {
            position: relative;
            z-index: 1;
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .loading {
            opacity: 0.5;
            pointer-events: none;
        }

        .text-center {
            text-align: center;
        }

        .mb-4 {
            margin-bottom: var(--spacing-md);
        }

        .mt-4 {
            margin-top: var(--spacing-md);
        }

        /* Feature Badges */
        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 2px 6px;
            background: var(--primary-color);
            color: white;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: bold;
        }

        .trending-indicator {
            color: var(--warning-color);
            animation: glow 2s ease-in-out infinite alternate;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container {
                padding: var(--spacing-md) var(--spacing-sm);
                padding-bottom: 80px;
            }
            
            .post-content {
                padding: var(--spacing-md);
            }
            
            .chat-container {
                width: calc(100vw - 40px);
                right: 20px;
                left: 20px;
            }

            .modal-content {
                width: 95%;
                margin: var(--spacing-md);
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface-color);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            :root {
                --text-primary: #ffffff;
                --text-secondary: #ffffff;
                --background-color: #000000;
                --surface-color: #000000;
                --border-color: #ffffff;
            }
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Screen Readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Preloader -->
    <div id="preloader" class="preloader" role="status" aria-label="Loading SmileX">
        <div class="preloader-logo" aria-hidden="true">
            <i class="fas fa-smile-beam"></i>
        </div>
        <div class="preloader-text">SmileX</div>
        <div class="loading-spinner"></div>
        <span class="sr-only">Loading application...</span>
    </div>

    <!-- Onboarding Modal -->
    <div class="overlay" id="onboardingOverlay" role="dialog" aria-labelledby="onboarding-title" aria-modal="true">
        <div class="onboarding-container">
            <header class="onboarding-header">
                <h2 id="onboarding-title">
                    <i class="fas fa-user-circle" aria-hidden="true"></i> 
                    Welcome to SmileX
                </h2>
                <p>Complete your profile to join our community</p>
            </header>

            <form id="registrationForm" novalidate>
                <!-- Profile Picture Upload Section -->
                <div class="profile-upload-section">
                    <div class="profile-preview" id="profilePreview">
                        <span id="profileInitial">?</span>
                        <div class="profile-upload-overlay">
                            <i class="fas fa-camera"></i>
                        </div>
                    </div>
                    <div class="profile-upload-buttons">
                        <button type="button" class="btn btn-secondary" onclick="openFileUpload()">
                            <i class="fas fa-upload"></i> Upload
                        </button>
                    </div>
                    <input type="file" id="profileImageInput" accept="image/*" style="display: none;">
                </div>

                <div class="form-group">
                    <label for="fullName" class="form-label">
                        <i class="fas fa-user" aria-hidden="true"></i> Full Name
                    </label>
                    <input type="text" 
                           id="fullName" 
                           name="fullName" 
                           class="form-control" 
                           placeholder="Enter your full name" 
                           required>
                    <div id="nameValidation" class="name-validation" style="display: none;"></div>
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">
                        <i class="fas fa-envelope" aria-hidden="true"></i> Email Address
                    </label>
                    <input type="email" 
                           id="email" 
                           name="email" 
                           class="form-control" 
                           placeholder="your.email@example.com" 
                           required>
                </div>

                <div style="display: flex; gap: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label for="gender" class="form-label">
                            <i class="fas fa-venus-mars" aria-hidden="true"></i> Gender
                        </label>
                        <select id="gender" name="gender" class="form-select" required>
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label for="country" class="form-label">
                            <i class="fas fa-globe" aria-hidden="true"></i> Country
                        </label>
                        <select id="country" name="country" class="form-select" required>
                            <option value="">Select Country</option>
                            <option value="US">United States</option>
                            <option value="UK">United Kingdom</option>
                            <option value="CA">Canada</option>
                            <option value="AU">Australia</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="JP">Japan</option>
                            <option value="IN">India</option>
                            <option value="BR">Brazil</option>
                            <option value="NG">Nigeria</option>
                            <option value="ZA">South Africa</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <fieldset class="consent-section">
                    <legend>
                        <h4><i class="fas fa-shield-alt" aria-hidden="true"></i> Platform Consent</h4>
                    </legend>
                    <div class="consent-item">
                        <input type="checkbox" id="ageConsent" name="ageConsent" required>
                        <label for="ageConsent">I am 13 years or older</label>
                    </div>
                    <div class="consent-item">
                        <input type="checkbox" id="termsConsent" name="termsConsent" required>
                        <label for="termsConsent">I agree to the Terms of Service</label>
                    </div>
                    <div class="consent-item">
                        <input type="checkbox" id="privacyConsent" name="privacyConsent" required>
                        <label for="privacyConsent">I consent to privacy policy</label>
                    </div>
                </fieldset>

                <button type="submit" id="submitBtn" class="btn btn-primary" disabled style="width: 100%;">
                    <i class="fas fa-paper-plane" aria-hidden="true"></i> Join SmileX
                </button>
            </form>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="#" class="logo" aria-label="SmileX Home">
                <i class="fas fa-smile-beam" aria-hidden="true"></i>
                <span>SmileX</span>
            </a>

            <div class="nav-search" role="search">
                <label for="searchInput" class="sr-only">Search Everything</label>
                <input type="text" 
                       id="searchInput" 
                       placeholder="Search posts, communities, users...">
                <i class="fas fa-search" aria-hidden="true"></i>
                <div id="searchResults" class="search-results hidden" role="listbox" aria-label="Search results"></div>
            </div>

            <div class="nav-actions">
                <button class="nav-button" 
                        id="themeToggle" 
                        aria-label="Toggle dark mode"
                        title="Toggle Theme">
                    <i class="fas fa-moon" aria-hidden="true"></i>
                </button>
                <button class="nav-button" 
                        id="notificationBtn" 
                        aria-label="View notifications"
                        title="Notifications">
                    <i class="fas fa-bell" aria-hidden="true"></i>
                    <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                </button>
                <div class="user-avatar" 
                     id="userAvatar" 
                     role="img" 
                     aria-label="User avatar">
                    <span id="userInitial">U</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main id="main-content" class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar" role="complementary" aria-label="Community navigation">
            <section>
                <h3><i class="fas fa-users" aria-hidden="true"></i> My Communities</h3>
                <ul id="communitiesList" role="list">
                    <li style="color: var(--text-muted); font-size: var(--font-size-sm); padding: var(--spacing-sm);">
                        No communities yet
                    </li>
                </ul>
                <button id="createCommunityBtn" 
                        class="btn btn-primary" 
                        style="width: 100%; margin-top: var(--spacing-md);">
                    <i class="fas fa-plus" aria-hidden="true"></i> Create Community
                </button>
            </section>

            <section style="margin-top: var(--spacing-xl);">
                <h3><i class="fas fa-compass" aria-hidden="true"></i> Explore</h3>
                <button id="browseCommunityBtn" class="btn btn-secondary" style="width: 100%;">
                    <i class="fas fa-globe" aria-hidden="true"></i> Browse Communities
                </button>
            </section>
        </aside>

        <!-- Main Feed -->
        <main class="main-feed" role="main" aria-label="Posts feed">
            <!-- Create Post Card -->
            <section class="create-post-card" aria-label="Create new post">
                <div class="create-post-input">
                    <div class="user-avatar" role="img" aria-label="Your avatar">
                        <span id="createPostUserInitial">U</span>
                    </div>
                    <button id="createPostInput" 
                            class="form-control" 
                            style="text-align: left; cursor: pointer; border: none;"
                            aria-label="Create a new post">
                        What's on your mind?
                    </button>
                </div>
                <div class="post-type-buttons" role="group" aria-label="Post type options">
                    <button class="post-type-button" 
                            data-post-type="image" 
                            aria-label="Create image post">
                        
                            aria-label="Create image post">
                        <i class="far fa-image" aria-hidden="true"></i> Image
                    </button>
                    <button class="post-type-button" 
                            data-post-type="video" 
                            aria-label="Create video post">
                        <i class="fas fa-video" aria-hidden="true"></i> Video
                    </button>
                    <button class="post-type-button" 
                            data-post-type="text" 
                            aria-label="Create text post">
                        <i class="far fa-file-alt" aria-hidden="true"></i> Text
                    </button>
                    <button class="post-type-button" 
                            data-post-type="poll" 
                            aria-label="Create poll">
                        <i class="fas fa-poll" aria-hidden="true"></i> Poll
                    </button>
                </div>
            </section>

            <!-- Post Sorting -->
            <section class="sort-buttons" role="group" aria-label="Sort posts">
                <button class="sort-button active" 
                        data-sort="hot" 
                        aria-pressed="true">
                    <i class="fas fa-bolt" aria-hidden="true"></i> Hot
                </button>
                <button class="sort-button" 
                        data-sort="new" 
                        aria-pressed="false">
                    <i class="fas fa-certificate" aria-hidden="true"></i> New
                </button>
                <button class="sort-button" 
                        data-sort="top" 
                        aria-pressed="false">
                    <i class="fas fa-arrow-trend-up" aria-hidden="true"></i> Top
                </button>
                <button class="sort-button" 
                        data-sort="trending" 
                        aria-pressed="false">
                    <i class="fas fa-fire trending-indicator" aria-hidden="true"></i> Trending
                </button>
            </section>

            <!-- Posts Feed -->
            <section id="posts-feed" role="feed" aria-label="Social media posts">
                <!-- Sample Post -->
                <article class="post-card" role="article">
                    <div class="post-content">
                        <div class="vote-section" role="group" aria-label="Vote on post">
                            <button class="vote-button" aria-label="Upvote post">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <div class="vote-count" aria-label="Vote count">1.2k</div>
                            <button class="vote-button" aria-label="Downvote post">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div class="post-main">
                            <div class="post-meta">
                                <span class="community-icon bg-purple-500">S</span>
                                <span>SmileX Official</span>
                                <span>•</span>
                                <span>Posted by SmileX Team <span class="premium-badge"><i class="fas fa-crown"></i> Premium</span></span>
                                <span>•</span>
                                <time>2 hours ago</time>
                            </div>
                            
                            <h2 class="post-title">🎉 Welcome to SmileX - The Future of Social Media! 🎉</h2>
                            
                            <div class="post-text">
                                Welcome to SmileX, the most advanced social media platform ever created! 
                                Explore amazing features like live polls, stories, premium content, 
                                real-time chat, community management, and so much more. 
                                This is the future of social networking!
                            </div>
                            
                            <div class="post-actions">
                                <div class="post-action-buttons">
                                    <button class="post-action-button" aria-label="View comments">
                                        <i class="far fa-comment"></i>
                                        <span>247 Comments</span>
                                    </button>
                                    <button class="post-action-button" aria-label="Share post">
                                        <i class="fas fa-share"></i>
                                        <span>Share</span>
                                    </button>
                                    <button class="post-action-button" aria-label="Save post">
                                        <i class="far fa-bookmark"></i>
                                        <span>Save</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>

                <!-- Sample Poll Post -->
                <article class="post-card" role="article">
                    <div class="post-content">
                        <div class="vote-section" role="group" aria-label="Vote on post">
                            <button class="vote-button" aria-label="Upvote post">
                                <i class="fas fa-chevron-up"></i>
                            </button>
                            <div class="vote-count" aria-label="Vote count">567</div>
                            <button class="vote-button" aria-label="Downvote post">
                                <i class="fas fa-chevron-down"></i>
                            </button>
                        </div>
                        
                        <div class="post-main">
                            <div class="post-meta">
                                <span class="community-icon bg-blue-500">G</span>
                                <span>General</span>
                                <span>•</span>
                                <span>Posted by PollMaster</span>
                                <span>•</span>
                                <time>4 hours ago</time>
                                <span class="live-indicator"><div class="live-dot"></div>LIVE POLL</span>
                            </div>
                            
                            <h2 class="post-title">🔥 What's your favorite SmileX feature?</h2>
                            
                            <div class="poll-container">
                                <div class="poll-option">
                                    <div class="poll-option-bar" style="width: 35%"></div>
                                    <span class="poll-option-text">Live Polls & Real-time Updates</span>
                                    <span class="poll-option-percentage">35%</span>
                                </div>
                                <div class="poll-option">
                                    <div class="poll-option-bar" style="width: 28%"></div>
                                    <span class="poll-option-text">Advanced Search System</span>
                                    <span class="poll-option-percentage">28%</span>
                                </div>
                                <div class="poll-option">
                                    <div class="poll-option-bar" style="width: 22%"></div>
                                    <span class="poll-option-text">Community Management</span>
                                    <span class="poll-option-percentage">22%</span>
                                </div>
                                <div class="poll-option">
                                    <div class="poll-option-bar" style="width: 15%"></div>
                                    <span class="poll-option-text">Premium Features</span>
                                    <span class="poll-option-percentage">15%</span>
                                </div>
                                <div class="poll-stats">
                                    1,247 votes • Active <span class="live-indicator"><div class="live-dot"></div>LIVE</span>
                                </div>
                            </div>
                            
                            <div class="post-actions">
                                <div class="post-action-buttons">
                                    <button class="post-action-button" aria-label="View comments">
                                        <i class="far fa-comment"></i>
                                        <span>89 Comments</span>
                                    </button>
                                    <button class="post-action-button" aria-label="Share post">
                                        <i class="fas fa-share"></i>
                                        <span>Share</span>
                                    </button>
                                    <button class="post-action-button" aria-label="Save post">
                                        <i class="far fa-bookmark"></i>
                                        <span>Save</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </article>
            </section>

            <!-- Load More Button -->
            <div class="text-center">
                <button id="loadMoreBtn" class="btn btn-secondary">Load more posts</button>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar" role="complementary" aria-label="Discover and premium">
            <!-- Live Stats -->
            <section style="background: var(--surface-secondary); border-radius: var(--radius-xl); padding: var(--spacing-lg);">
                <h4 style="display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-md);">
                    <i class="fas fa-chart-line" aria-hidden="true"></i>
                    Live Stats
                </h4>
                <div style="display: flex; flex-direction: column; gap: var(--spacing-sm); font-size: var(--font-size-sm);">
                    <div style="display: flex; justify-content: space-between;">
                        <span>Online Users:</span>
                        <span id="onlineUsers" style="color: var(--success-color); font-weight: bold;">127,543</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Active Polls:</span>
                        <span id="activePolls" style="color: var(--primary-color); font-weight: bold;">1,247</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Posts Today:</span>
                        <span id="postsToday" style="color: var(--warning-color); font-weight: bold;">45,678</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>Communities:</span>
                        <span id="totalCommunities" style="color: var(--accent-color); font-weight: bold;">8,934</span>
                    </div>
                </div>
            </section>

            <!-- Premium Section -->
            <section class="premium-section">
                <div class="premium-content">
                    <div style="display: flex; align-items: center; margin-bottom: var(--spacing-sm);">
                        <i class="fas fa-crown" style="margin-right: var(--spacing-sm); color: var(--premium-gold);" aria-hidden="true"></i>
                        <h4>SmileX Premium</h4>
                        <span class="premium-badge" style="margin-left: var(--spacing-sm);">
                            <i class="fas fa-star"></i> VIP
                        </span>
                    </div>
                    <p style="font-size: var(--font-size-sm); margin-bottom: var(--spacing-md);">
                        Unlock exclusive features: <span class="disco-text">Disco Text</span>, 
                        <span class="premium-emoji">🎉</span> Premium Emojis, 
                        Ad-free experience, and more!
                    </p>
                    <button id="premiumBtn" class="btn btn-premium" style="width: 100%;">
                        <i class="fas fa-crown"></i> UPGRADE TO PREMIUM
                    </button>
                </div>
            </section>
        </aside>
    </main>

    <!-- Create Post Modal -->
    <div id="create-post-modal" class="modal" role="dialog" aria-labelledby="create-post-title" aria-modal="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="create-post-title">Create a post</h3>
                <button id="closeCreatePostModal" 
                        class="modal-close" 
                        aria-label="Close create post modal">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </header>

            <div class="modal-body">
                <form id="createPostForm" novalidate>
                    <div class="form-group">
                        <label for="postType" class="form-label">Post type</label>
                        <select id="postType" name="postType" class="form-select" required>
                            <option value="text">Text Post</option>
                            <option value="image">Image Post</option>
                            <option value="video">Video Post</option>
                            <option value="poll">Poll</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="postTitle" class="form-label">Title</label>
                        <input type="text" 
                               id="postTitle" 
                               name="title" 
                               placeholder="Title" 
                               class="form-control" 
                               required>
                    </div>

                    <div class="form-group" id="contentContainer">
                        <label for="postContent" class="form-label">Content</label>
                        <textarea id="postContent" 
                                  name="content" 
                                  placeholder="What are your thoughts?" 
                                  rows="6" 
                                  class="form-control"></textarea>
                    </div>

                    <!-- Poll Options Container -->
                    <div class="form-group hidden" id="pollOptionsContainer">
                        <label class="form-label">Poll Options</label>
                        <div id="pollOptions">
                            <input type="text" 
                                   class="form-control poll-option-input" 
                                   placeholder="Option 1" 
                                   style="margin-bottom: var(--spacing-sm);">
                            <input type="text" 
                                   class="form-control poll-option-input" 
                                   placeholder="Option 2" 
                                   style="margin-bottom: var(--spacing-sm);">
                        </div>
                        <button type="button" 
                                id="addPollOption" 
                                class="btn btn-secondary" 
                                style="margin-top: var(--spacing-sm);">
                            <i class="fas fa-plus" aria-hidden="true"></i> Add Option
                        </button>
                    </div>

                    <div class="form-group" id="mediaUploadContainer">
                        <label class="form-label">Media Upload</label>
                        <div class="media-upload-area" 
                             id="mediaUploadArea" 
                             role="button" 
                             tabindex="0" 
                             aria-label="Click or drag media files here to upload">
                            <i class="fas fa-cloud-upload-alt" 
                               style="font-size: var(--font-size-2xl); color: var(--text-muted); margin-bottom: var(--spacing-sm);" 
                               aria-hidden="true"></i>
                            <p>Click or drag images/videos here to upload</p>
                            <p style="font-size: var(--font-size-xs); color: var(--text-muted);">
                                Supports: JPG, PNG, GIF, MP4, WebM (Max 50MB)
                            </p>
                            <input type="file" 
                                   id="mediaInput" 
                                   accept="image/*,video/*" 
                                   multiple 
                                   style="display: none;" 
                                   aria-label="Select media files to upload">
                        </div>
                        <div id="mediaPreviewContainer" class="media-preview-container" role="list" aria-label="Selected media files"></div>
                    </div>
                </form>
            </div>

            <footer class="modal-footer">
                <button type="button" id="cancelCreatePost" class="btn btn-secondary">Cancel</button>
                <button type="submit" form="createPostForm" class="btn btn-primary">Post</button>
            </footer>
        </div>
    </div>

    <!-- Create Community Modal -->
    <div id="create-community-modal" class="modal" role="dialog" aria-labelledby="create-community-title" aria-modal="true">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="create-community-title">Create a Community</h3>
                <button id="closeCreateCommunityModal" 
                        class="modal-close" 
                        aria-label="Close create community modal">
                    <i class="fas fa-times" aria-hidden="true"></i>
                </button>
            </header>

            <div class="modal-body">
                <form id="createCommunityForm" novalidate>
                    <div class="form-group">
                        <label for="communityName" class="form-label">Community Name</label>
                        <input type="text" 
                               id="communityName" 
                               name="name" 
                               placeholder="Enter community name" 
                               class="form-control" 
                               required>
                    </div>

                    <div class="form-group">
                        <label for="communityDescription" class="form-label">Description</label>
                        <textarea id="communityDescription" 
                                  name="description" 
                                  placeholder="What's your community about?" 
                                  rows="4" 
                                  class="form-control"></textarea>
                    </div>

                    <fieldset class="form-group">
                        <legend class="form-label">Community Type</legend>
                        <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-sm);">
                            <div style="display: flex; align-items: center;">
                                <input type="radio" 
                                       id="typePublic" 
                                       name="type" 
                                       value="public" 
                                       checked 
                                       style="margin-right: var(--spacing-sm);">
                                <label for="typePublic">Public</label>
                            </div>
                            <div style="display: flex; align-items: center;">
                                <input type="radio" 
                                       id="typePrivate" 
                                       name="type" 
                                       value="private" 
                                       style="margin-right: var(--spacing-sm);">
                                <label for="typePrivate">Private</label>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </div>

            <footer class="modal-footer">
                <button type="button" id="cancelCreateCommunity" class="btn btn-secondary">Cancel</button>
                <button type="submit" form="createCommunityForm" class="btn btn-primary">Create Community</button>
            </footer>
        </div>
    </div>

    <!-- Live Chat Toggle Button -->
    <button id="chat-toggle-btn" 
            class="chat-toggle" 
            aria-label="Toggle live chat" 
            title="Live Chat Support">
        <i class="fas fa-comment-dots" aria-hidden="true"></i>
    </button>

    <!-- Live Chat Container -->
    <div id="chat-container" class="chat-container" role="dialog" aria-labelledby="chat-title">
        <header class="chat-header">
            <h3 id="chat-title">Live Chat Support</h3>
            <button id="chat-close-btn" 
                    class="chat-close" 
                    aria-label="Close chat">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
        </header>
        <div class="chat-messages" 
             id="chat-messages" 
             role="log" 
             aria-live="polite" 
             aria-label="Chat messages">
            <div class="message agent">
                <div class="message-user">Support Agent</div>
                <div class="message-text">Hello! How can we help you today?</div>
                <div class="message-time">Just now</div>
            </div>
        </div>
        <div class="chat-input-container">
            <label for="chat-input" class="sr-only">Type your message</label>
            <input type="text" 
                   id="chat-input" 
                   class="chat-input" 
                   placeholder="Type your message...">
            <button id="chat-send-btn" 
                    class="chat-send" 
                    aria-label="Send message">
                <i class="fas fa-paper-plane" aria-hidden="true"></i>
            </button>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav" role="navigation" aria-label="Mobile navigation">
        <a href="#" class="mobile-nav-item active" aria-current="page">
            <i class="fas fa-home" aria-hidden="true"></i>
            <span>Home</span>
        </a>
        <a href="#" class="mobile-nav-item" id="mobileBrowseBtn">
            <i class="fas fa-compass" aria-hidden="true"></i>
            <span>Explore</span>
        </a>
        <a href="#" class="mobile-nav-item" id="mobileCreatePost">
            <i class="fas fa-plus-circle" aria-hidden="true"></i>
            <span>Create</span>
        </a>
        <a href="#" class="mobile-nav-item">
            <i class="fas fa-bell" aria-hidden="true"></i>
            <span>Notifications</span>
        </a>
        <a href="#" class="mobile-nav-item" id="mobileCreateCommunity">
            <i class="fas fa-users" aria-hidden="true"></i>
            <span>Community</span>
        </a>
    </nav>

    <script>
        // SmileX Social Platform - Complete JavaScript Implementation
        
        // Global Configuration
        const CONFIG = {
            MAX_FILE_SIZE: 50 * 1024 * 1024, // 50MB
            SUPPORTED_IMAGE_TYPES: ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],
            SUPPORTED_VIDEO_TYPES: ['video/mp4', 'video/webm', 'video/ogg'],
            MAX_POLL_OPTIONS: 6,
            MAX_POST_LENGTH: 10000,
            PREMIUM_EMOJIS: ['✨', '💎', '👑', '🌟', '🔥', '💫', '🎭', '🎪', '🎨', '🎯']
        };

        // Global State
        let currentUser = null;
        let posts = [];
        let communities = [];
        let isLiveMode = true;

        // Utility Functions
        const utils = {
            formatNumber(num) {
                if (num >= 1000000) {
                    return (num / 1000000).toFixed(1) + 'M';
                } else if (num >= 1000) {
                    return (num / 1000).toFixed(1) + 'k';
                }
                return num.toString();
            },

            getTimeAgo(date) {
                const now = new Date();
                const diffInSeconds = Math.floor((now - date) / 1000);
                
                if (diffInSeconds < 60) {
                    return 'Just now';
                } else if (diffInSeconds < 3600) {
                    const minutes = Math.floor(diffInSeconds / 60);
                    return `${minutes} minute${minutes !== 1 ? 's' : ''} ago`;
                } else if (diffInSeconds < 86400) {
                    const hours = Math.floor(diffInSeconds / 3600);
                    return `${hours} hour${hours !== 1 ? 's' : ''} ago`;
                } else {
                    const days = Math.floor(diffInSeconds / 86400);
                    return `${days} day${days !== 1 ? 's' : ''} ago`;
                }
            },

            generateId() {
                return Date.now().toString() + '_' + Math.random().toString(36).substr(2, 9);
            },

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 1rem 1.5rem;
                    border-radius: 8px;
                    color: white;
                    font-weight: 500;
                    z-index: 1001;
                    transform: translateX(100%);
                    opacity: 0;
                    transition: all 0.3s ease;
                    max-width: 300px;
                    word-wrap: break-word;
                `;
                
                // Set background color based on type
                switch (type) {
                    case 'success':
                        notification.style.background = '#10b981';
                        break;
                    case 'error':
                        notification.style.background = '#ef4444';
                        break;
                    case 'warning':
                        notification.style.background = '#f59e0b';
                        break;
                    default:
                        notification.style.background = '#6366f1';
                }
                
                notification.textContent = message;
                document.body.appendChild(notification);
                
                // Trigger animation
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                    notification.style.opacity = '1';
                }, 100);
                
                // Auto remove after 3 seconds
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 300);
                }, 3000);
            }
        };

        // Modal Functions
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }

        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }

        // Profile Management
        function openFileUpload() {
            document.getElementById('profileImageInput').click();
        }

        function handleProfileImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const preview = document.getElementById('profilePreview');
                    preview.innerHTML = `
                        <img src="${e.target.result}" alt="Profile picture">
                        <div class="profile-upload-overlay">
                            <i class="fas fa-camera"></i>
                        </div>
                    `;
                    utils.showNotification('Profile picture updated!', 'success');
                };
                reader.readAsDataURL(file);
            }
        }

        // Form Validation
        function updateSubmitButtonState() {
            const form = document.getElementById('registrationForm');
            const submitBtn = document.getElementById('submitBtn');
            
            if (!form || !submitBtn) return;
            
            const requiredFields = form.querySelectorAll('[required]');
            const allValid = Array.from(requiredFields).every(field => {
                if (field.type === 'checkbox') {
                    return field.checked;
                }
                return field.value.trim() !== '';
            });
            
            submitBtn.disabled = !allValid;
        }

        // Registration Handler
        function handleRegistrationSubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const userData = {
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                gender: formData.get('gender'),
                country: formData.get('country'),
                userId: utils.generateId(),
                createdAt: new Date().toISOString()
            };

            currentUser = userData;
            localStorage.setItem('smilex_user', JSON.stringify(userData));

            // Update UI
            updateUserInterface(userData);
            hideModal('onboardingOverlay');
            
            utils.showNotification(`Welcome to SmileX, ${userData.fullName}!`, 'success');
        }

        // Post Creation
        function handleCreatePostSubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const postData = {
                id: utils.generateId(),
                title: formData.get('title'),
                content: formData.get('content') || "",
                author: currentUser ? currentUser.fullName : "Anonymous",
                authorId: currentUser ? currentUser.userId : "anonymous",
                timestamp: new Date(),
                type: formData.get('postType'),
                votes: 0,
                comments: 0,
                community: "General"
            };

            posts.unshift(postData);
            hideModal('create-post-modal');
            event.target.reset();
            
            utils.showNotification('Post created successfully!', 'success');
            renderPosts();
        }

        // Community Creation
        function handleCreateCommunitySubmit(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const communityData = {
                id: utils.generateId(),
                name: formData.get('name'),
                description: formData.get('description'),
                type: formData.get('type'),
                createdBy: currentUser ? currentUser.fullName : "Anonymous",
                memberCount: 1,
                createdAt: new Date()
            };

            communities.push(communityData);
            hideModal('create-community-modal');
            event.target.reset();
            
            utils.showNotification(`Community "${communityData.name}" created successfully!`, 'success');
            updateCommunitiesDisplay();
        }

        // Post Type Handler
        function handlePostTypeChange(event) {
            const postType = event.target.value;
            const contentContainer = document.getElementById('contentContainer');
            const pollContainer = document.getElementById('pollOptionsContainer');
            const mediaContainer = document.getElementById('mediaUploadContainer');

            // Reset visibility
            contentContainer.classList.remove('hidden');
            pollContainer.classList.add('hidden');
            mediaContainer.classList.remove('hidden');

            if (postType === 'poll') {
                pollContainer.classList.remove('hidden');
                mediaContainer.classList.add('hidden');
            }
        }

        // Add Poll Option
        function addPollOption() {
            const container = document.getElementById('pollOptions');
            const currentOptions = container.querySelectorAll('.poll-option-input').length;
            
            if (currentOptions >= CONFIG.MAX_POLL_OPTIONS) {
                utils.showNotification(`Maximum ${CONFIG.MAX_POLL_OPTIONS} options allowed`, 'warning');
                return;
            }
            
            const newOption = document.createElement('input');
            newOption.type = 'text';
            newOption.className = 'form-control poll-option-input';
            newOption.placeholder = `Option ${currentOptions + 1}`;
            newOption.style.marginBottom = 'var(--spacing-sm)';
            
            container.appendChild(newOption);
            newOption.focus();
        }

        // Media Upload Handler
        function handleMediaUpload() {
            const mediaUploadArea = document.getElementById('mediaUploadArea');
            const mediaInput = document.getElementById('mediaInput');
            
            if (mediaUploadArea && mediaInput) {
                mediaUploadArea.addEventListener('click', () => mediaInput.click());
                
                mediaUploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    mediaUploadArea.classList.add('dragover');
                });
                
                mediaUploadArea.addEventListener('dragleave', () => {
                    mediaUploadArea.classList.remove('dragover');
                });
                
                mediaUploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    mediaUploadArea.classList.remove('dragover');
                    const files = Array.from(e.dataTransfer.files);
                    handleFiles(files);
                });
                
                mediaInput.addEventListener('change', (e) => {
                    const files = Array.from(e.target.files);
                    handleFiles(files);
                });
            }
        }

        function handleFiles(files) {
            const container = document.getElementById('mediaPreviewContainer');
            
            files.forEach(file => {
                if (file.size > CONFIG.MAX_FILE_SIZE) {
                    utils.showNotification(`File ${file.name} is too large`, 'error');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    const preview = document.createElement('div');
                    preview.className = 'media-preview-item';
                    
                    if (file.type.startsWith('image/')) {
                        preview.innerHTML = `
                            <img src="${e.target.result}" alt="Preview">
                            <button class="media-remove-btn" onclick="removeMedia(this)">
                                <i class="fas fa-times"></i>
                            </button>
                        `;
                    } else if (file.type.startsWith('video/')) {
                        preview.innerHTML = `
                            <video src="${e.target.result}" muted></video>
                            <button class="media-remove-btn" onclick="removeMedia(this)">
                                <i class="fas fa-times"></i>
                            </button>
                        `;
                    }
                    
                    container.appendChild(preview);
                };
                reader.readAsDataURL(file);
            });
        }

        function removeMedia(button) {
            button.parentElement.remove();
        }

        // Chat System
        class ChatSystem {
            constructor() {
                this.isOpen = false;
                this.messages = [
                    {
                        id: 1,
                        user: 'Support Agent',
                        text: 'Hello! How can we help you today?',
                        timestamp: new Date(),
                        type: 'agent'
                    }
                ];
            }

            toggle() {
                this.isOpen = !this.isOpen;
                const container = document.getElementById('chat-container');
                
                if (this.isOpen) {
                    container.classList.add('active');
                } else {
                    container.classList.remove('active');
                }
            }

            sendMessage(text) {
                if (!text.trim()) return;

                const userMessage = {
                    id: Date.now(),
                    user: currentUser?.fullName || 'User',
                    text: text.trim(),
                    timestamp: new Date(),
                    type: 'user'
                };

                this.messages.push(userMessage);
                this.renderMessages();

                // Simulate agent response
                setTimeout(() => {
                    const responses = [
                        "Thanks for your message! Our team will get back to you soon.",
                        "I understand your concern. Let me help you with that.",
                        "That's a great question! Here's what I can tell you...",
                        "I'll make sure to pass this along to the right team.",
                        "Is there anything else I can help you with today?"
                    ];

                    const agentMessage = {
                        id: Date.now() + 1,
                        user: 'Support Agent',
                        text: responses[Math.floor(Math.random() * responses.length)],
                        timestamp: new Date(),
                        type: 'agent'
                    };

                    this.messages.push(agentMessage);
                    this.renderMessages();
                }, 1000 + Math.random() * 2000);

                // Clear input
                const input = document.getElementById('chat-input');
                if (input) input.value = '';
            }

            renderMessages() {
                const container = document.getElementById('chat-messages');
                if (!container) return;

                container.innerHTML = this.messages.map(message => `
                    <div class="message ${message.type}">
                        <div class="message-user">${message.user}</div>
                        <div class="message-text">${message.text}</div>
                        <div class="message-time">${utils.getTimeAgo(message.timestamp)}</div>
                    </div>
                `).join('');

                // Scroll to bottom
                container.scrollTop = container.scrollHeight;
            }
        }

        // Initialize Chat System
        const chatSystem = new ChatSystem();

        // Theme Management
        function toggleTheme() {
            const root = document.documentElement;
            const themeToggle = document.getElementById('themeToggle');
            const currentTheme = localStorage.getItem('smilex_theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            if (newTheme === 'light') {
                root.style.setProperty('--background-color', '#ffffff');
                root.style.setProperty('--surface-color', '#f8f9fa');
                root.style.setProperty('--surface-secondary', '#e9ecef');
                root.style.setProperty('--text-primary', '#212529');
                root.style.setProperty('--text-secondary', '#495057');
                root.style.setProperty('--text-muted', '#6c757d');
                root.style.setProperty('--border-color', '#dee2e6');
                
                if (themeToggle) {
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                }
            } else {
                root.style.setProperty('--background-color', '#000000');
                root.style.setProperty('--surface-color', '#1a1a1a');
                root.style.setProperty('--surface-secondary', '#2a2a2a');
                root.style.setProperty('--text-primary', '#ffffff');
                root.style.setProperty('--text-secondary', '#cccccc');
                root.style.setProperty('--text-muted', '#666666');
                root.style.setProperty('--border-color', '#404040');
                
                if (themeToggle) {
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }
            }
            
            localStorage.setItem('smilex_theme', newTheme);
            utils.showNotification(`Switched to ${newTheme} mode`, 'info');
        }

        // Update User Interface
        function updateUserInterface(userData) {
            const userInitials = userData.fullName.charAt(0).toUpperCase();
            
            document.querySelectorAll('#userInitial, #createPostUserInitial').forEach(element => {
                element.textContent = userInitials;
            });
        }

        // Update Communities Display
        function updateCommunitiesDisplay() {
            const list = document.getElementById('communitiesList');
            if (!list) return;

            if (communities.length === 0) {
                list.innerHTML = '<li style="color: var(--text-muted); font-size: var(--font-size-sm); padding: var(--spacing-sm);">No communities yet</li>';
            } else {
                list.innerHTML = communities.map(community => `
                    <li>
                        <a href="#" style="display: flex; align-items: center;">
                            <div class="community-icon bg-purple-500">
                                ${community.name.charAt(0).toUpperCase()}
                            </div>
                            <div>
                                <div style="font-weight: 500;">${community.name}</div>
                                <div style="font-size: 11px; color: var(--text-muted);">${utils.formatNumber(community.memberCount)} members</div>
                            </div>
                        </a>
                    </li>
                `).join('');
            }
        }

        // Render Posts
        function renderPosts() {
            // Posts are already rendered in HTML for demo purposes
            // In a real app, this would dynamically generate post HTML
        }

        // Live Stats Update
        function updateLiveStats() {
            const stats = {
                onlineUsers: Math.floor(Math.random() * 10000) + 120000,
                activePolls: Math.floor(Math.random() * 500) + 1000,
                postsToday: Math.floor(Math.random() * 10000) + 40000,
                totalCommunities: Math.floor(Math.random() * 1000) + 8000
            };

            Object.keys(stats).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = utils.formatNumber(stats[key]);
                }
            });
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Hide preloader
            setTimeout(() => {
                const preloader = document.getElementById('preloader');
                if (preloader) {
                    preloader.style.opacity = '0';
                    setTimeout(() => {
                        preloader.style.display = 'none';
                    }, 500);
                }
            }, 2000);

            // Check for existing user
            const existingUser = localStorage.getItem('smilex_user');
            if (existingUser) {
                try {
                    currentUser = JSON.parse(existingUser);
                    updateUserInterface(currentUser);
                } catch (error) {
                    console.error('Error loading user data:', error);
                }
            } else {
                // Show onboarding for new users
                setTimeout(() => {
                    showModal('onboardingOverlay');
                }, 2500);
            }

            // Form event listeners
            const registrationForm = document.getElementById('registrationForm');
            if (registrationForm) {
                registrationForm.addEventListener('submit', handleRegistrationSubmit);
                
                registrationForm.querySelectorAll('input, select').forEach(input => {
                    input.addEventListener('input', updateSubmitButtonState);
                    input.addEventListener('change', updateSubmitButtonState);
                });
            }

            const createPostForm = document.getElementById('createPostForm');
            if (createPostForm) {
                createPostForm.addEventListener('submit', handleCreatePostSubmit);
            }

            const createCommunityForm = document.getElementById('createCommunityForm');
            if (createCommunityForm) {
                createCommunityForm.addEventListener('submit', handleCreateCommunitySubmit);
            }

            // Profile image upload
            const profileImageInput = document.getElementById('profileImageInput');
            if (profileImageInput) {
                profileImageInput.addEventListener('change', handleProfileImageUpload);
            }

            // Post type change handler
            const postTypeSelect = document.getElementById('postType');
            if (postTypeSelect) {
                postTypeSelect.addEventListener('change', handlePostTypeChange);
            }

            // Add poll option button
            const addPollOptionBtn = document.getElementById('addPollOption');
            if (addPollOptionBtn) {
                addPollOptionBtn.addEventListener('click', addPollOption);
            }

            // Navigation handlers
            document.getElementById('createPostInput')?.addEventListener('click', () => {
                showModal('create-post-modal');
            });

            document.querySelectorAll('.post-type-button').forEach(button => {
                button.addEventListener('click', () => {
                    const postType = button.dataset.postType;
                    showModal('create-post-modal');
                    
                    setTimeout(() => {
                        const postTypeSelect = document.getElementById('postType');
                        if (postTypeSelect) {
                            postTypeSelect.value = postType;
                            handlePostTypeChange({ target: { value: postType } });
                        }
                    }, 100);
                });
            });

            document.getElementById('createCommunityBtn')?.addEventListener('click', () => {
                showModal('create-community-modal');
            });

            // Mobile navigation
            document.getElementById('mobileCreatePost')?.addEventListener('click', (e) => {
                e.preventDefault();
                showModal('create-post-modal');
            });

            document.getElementById('mobileCreateCommunity')?.addEventListener('click', (e) => {
                e.preventDefault();
                showModal('create-community-modal');
            });

            // Theme toggle
            document.getElementById('themeToggle')?.addEventListener('click', toggleTheme);

            // Chat system
            document.getElementById('chat-toggle-btn')?.addEventListener('click', () => {
                chatSystem.toggle();
            });

            document.getElementById('chat-close-btn')?.addEventListener('click', () => {
                chatSystem.toggle();
            });

            document.getElementById('chat-send-btn')?.addEventListener('click', () => {
                const input = document.getElementById('chat-input');
                if (input) {
                    chatSystem.sendMessage(input.value);
                }
            });

            document.getElementById('chat-input')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    chatSystem.sendMessage(e.target.value);
                }
            });

            // Modal close handlers
            document.querySelectorAll('.modal-close, .overlay').forEach(element => {
                element.addEventListener('click', (e) => {
                    if (e.target === element) {
                        const modal = element.closest('.modal, .overlay');
                        if (modal) {
                            modal.classList.remove('active');
                            document.body.style.overflow = '';
                        }
                    }
                });
            });

            // Sort buttons
            document.querySelectorAll('.sort-button[data-sort]').forEach(button => {
                button.addEventListener('click', () => {
                    // Update active state
                    document.querySelectorAll('.sort-button[data-sort]').forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-pressed', 'false');
                    });
                    
                    button.classList.add('active');
                    button.setAttribute('aria-pressed', 'true');
                    
                    utils.showNotification(`Sorted by ${button.textContent.trim()}`, 'info');
                });
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                // Escape key closes modals
                if (e.key === 'Escape') {
                    const activeModal = document.querySelector('.modal.active, .overlay.active');
                    if (activeModal) {
                        activeModal.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                }
                
                // Ctrl/Cmd + K for search
                if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                    e.preventDefault();
                    const searchInput = document.getElementById('searchInput');
                    if (searchInput) {
                        searchInput.focus();
                    }
                }
            });

            // Initialize media upload
            handleMediaUpload();

            // Start live stats updates
            setInterval(updateLiveStats, 5000);
            updateLiveStats();

            // Load theme
            const savedTheme = localStorage.getItem('smilex_theme');
            if (savedTheme === 'light') {
                toggleTheme();
            }

            console.log('🎉 SmileX Platform Initialized Successfully!');
        });

        // Global error handler
        window.addEventListener('error', (e) => {
            console.error('SmileX Error:', e.error);
            utils.showNotification('Something went wrong. Please try again.', 'error');
        });

        // Online/offline status
        window.addEventListener('online', () => {
            utils.showNotification('Connection restored!', 'success');
        });

        window.addEventListener('offline', () => {
            utils.showNotification('You are offline. Some features may not work.', 'warning');
        });
    </script>
</body>
</html>
